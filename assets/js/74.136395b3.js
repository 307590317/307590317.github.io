(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{390:function(t,s,a){"use strict";a.r(s);var n=a(25),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#跨域"}},[t._v("跨域")])]),s("li",[s("a",{attrs:{href:"#同源与非同源"}},[t._v("同源与非同源")])]),s("li",[s("a",{attrs:{href:"#跨域解决方案"}},[t._v("跨域解决方案")]),s("ul",[s("li",[s("a",{attrs:{href:"#基于jsonp实现跨域请求"}},[t._v("基于JSONP实现跨域请求：")])]),s("li",[s("a",{attrs:{href:"#cors跨域资源共享"}},[t._v("CORS跨域资源共享")])]),s("li",[s("a",{attrs:{href:"#_3、websocket-没有域的"}},[t._v("3、webSocket(没有域的)")])]),s("li",[s("a",{attrs:{href:"#_4、nginx反向代理"}},[t._v("4、nginx反向代理")])]),s("li",[s("a",{attrs:{href:"#_5、代理解决跨域问题"}},[t._v("5、代理解决跨域问题")])])])])])]),s("p"),t._v(" "),s("h1",{attrs:{id:"_36、9跨域方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_36、9跨域方法"}},[t._v("#")]),t._v(" 36、9跨域方法")]),t._v(" "),s("h2",{attrs:{id:"跨域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跨域"}},[t._v("#")]),t._v(" 跨域")]),t._v(" "),s("blockquote",[s("p",[t._v("浏览器是不支持跨域的，包括 "),s("code",[t._v("cookie，localStorage，DOM")]),t._v("元素也有同源策略，在客户端我们通常使用"),s("code",[t._v("ajax")]),t._v("来向服务器端发送请求，从而获取到服务器返回的数据结果；但是"),s("code",[t._v("ajax")]),t._v("有局限性：")]),t._v(" "),s("p",[s("code",[t._v("ajax")]),t._v("是同源策略请求：不允许跨域访问")])]),t._v(" "),s("h2",{attrs:{id:"同源与非同源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#同源与非同源"}},[t._v("#")]),t._v(" 同源与非同源")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("拿"),s("em",[t._v("当前页面的地址")]),t._v("和 "),s("em",[t._v("数据请求的接口地址(即"),s("code",[t._v("AJAX")]),t._v("中"),s("code",[t._v("URL")]),t._v("设定的地址)")]),t._v(" 作比较；\n如果下面三个都相同，那么就是同源策略，只要有一个不一样就是非同源（即跨域访问）")]),t._v(" "),s("ul",[s("li",[t._v("1、协议一致")]),t._v(" "),s("li",[t._v("2、域名或者"),s("code",[t._v("ip")]),t._v("一致（只能是域名对域名，IP对IP）")]),t._v(" "),s("li",[t._v("3、端口号一致")])]),t._v(" "),s("p",[t._v("同源策略限制的内容：")]),t._v(" "),s("ul",[s("li",[t._v("1、Cookie、LocalStorage、IndexedDB等存储性内容")]),t._v(" "),s("li",[t._v("2、DOM节点")]),t._v(" "),s("li",[t._v("3、AJAX请求发送后，返回结果被浏览器拦截")])]),t._v(" "),s("p",[t._v("为什么会出现跨域请求：\n在项目的前后端分离中，会出现跨域的问题")]),t._v(" "),s("ul",[s("li",[t._v("1、前后端同时开发，前端和后端都会把自己开发的项目部署到不同的站点上（或者不同的服务器上，减轻服务器的请求压力），此时就是跨域请求")]),t._v(" "),s("li",[t._v("2、本地开发的时候，预览页面一般都是"),s("code",[t._v("localhost")]),t._v("域名，而接口地址一般都是一个真实的域名，此时开发的时候想要调取服务器数据，也是跨域请求；")])])]),t._v(" "),s("h2",{attrs:{id:"跨域解决方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跨域解决方案"}},[t._v("#")]),t._v(" 跨域解决方案")]),t._v(" "),s("h3",{attrs:{id:"基于jsonp实现跨域请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基于jsonp实现跨域请求"}},[t._v("#")]),t._v(" 基于JSONP实现跨域请求：")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("方案一")]),t._v(" "),s("p",[s("code",[t._v("JSONP")]),t._v("原理：利用"),s("code",[t._v("script/img/link")]),t._v("不存在跨域问题\n"),s("img",{attrs:{src:t.$withBase("/assets/js-36-1.png"),alt:"js-36-1"}})]),t._v(" "),s("p",[s("em",[t._v("缺点")])]),t._v(" "),s("ul",[s("li",[t._v("1、"),s("code",[t._v("JSONP")]),t._v("需要服务器端支持（如果服务器端不支持"),s("code",[t._v("JSONP")]),t._v("处理，我们无法使用）")]),t._v(" "),s("li",[t._v("2、"),s("code",[t._v("JSONP")]),t._v("不安全(不能防止"),s("code",[t._v("XSS")]),t._v("攻击)，如果服务器支持，任何网站都可以获取我们的数据（一般公用接口可以用它来实现，但是重要信息，不建议使用）")]),t._v(" "),s("li",[t._v("3、"),s("code",[t._v("JSONP")]),t._v("都是"),s("code",[t._v("get")]),t._v("请求（没有"),s("code",[t._v("POST，PUT，DELETE")]),t._v("请求，不能处理大数据传输：尤其是客户端想把大数据发送给服务器端）")])])]),t._v(" "),s("h3",{attrs:{id:"cors跨域资源共享"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cors跨域资源共享"}},[t._v("#")]),t._v(" CORS跨域资源共享")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("CORS")]),t._v(" "),s("p",[s("code",[t._v("CORS")]),t._v("的基本思想，就是使用 自定义的"),s("code",[t._v("HTTP")]),t._v("头部让浏览器与服务器进行沟通，从而决定请求或者响应是应该成功还是应该失败\n浏览器会自动进行"),s("code",[t._v("CORS")]),t._v("通信，实现"),s("code",[t._v("CORS")]),t._v("通信的关键是后端。服务端设置"),s("code",[t._v("Access-Control-Allow-Origin")]),t._v("就可以开启"),s("code",[t._v("CORS")]),t._v("。该属性表示哪些域名可以访问资源。设置为通配符则表示所有网站都可以访问资源。")]),t._v(" "),s("p",[s("code",[t._v("CORS")]),t._v("虽然和前端没关系，但是通过这种方式解决跨域问题的话，会在发送请求时出现两种情况，分别为 "),s("strong",[s("code",[t._v("简单请求")])]),t._v(" 和 "),s("strong",[s("code",[t._v("复杂请求")])])]),t._v(" "),s("p",[s("strong",[t._v("简单请求")]),t._v("\n满足以下两大条件，就属于简单请求")]),t._v(" "),s("ul",[s("li",[t._v("1、使用下列方法\n"),s("ul",[s("li",[s("code",[t._v("GET")])]),t._v(" "),s("li",[s("code",[t._v("HEAD")])]),t._v(" "),s("li",[s("code",[t._v("POST")])])])]),t._v(" "),s("li",[t._v("2、请求头"),s("code",[t._v("Content-Type")]),t._v("的值仅限于下列三者之一\n"),s("ul",[s("li",[s("code",[t._v("text/plain")]),t._v("：纯文本格式，在发送时浏览器不会对其做处理")]),t._v(" "),s("li",[s("code",[t._v("multipart/form-data")]),t._v("：常用于文件等二进制，也可用于键值对参数，最后连接成一串字符传输")]),t._v(" "),s("li",[s("code",[t._v("application/x-www-form-urlencoded")]),t._v("：浏览器默认编码格式，会对参数进行编码，转换为"),s("code",[t._v("key=value")]),t._v("的形式，多个用"),s("code",[t._v("&")]),t._v("号隔开，"),s("code",[t._v("get")]),t._v("请求追加到"),s("code",[t._v("url")]),t._v("末尾，"),s("code",[t._v("post")]),t._v("请求会放入请求主体中发送给后端。")])])])]),t._v(" "),s("p",[s("strong",[t._v("复杂请求")]),t._v("\n不满足上述条件就是复杂请求。复杂的"),s("code",[t._v("CORS")]),t._v("请求，会在正式通信之前，发出一个预检请求（"),s("code",[t._v("options")]),t._v("请求），通过该请求来知道服务端是否允许跨域。")]),t._v(" "),s("p",[t._v("优化预检请求\n"),s("code",[t._v('res.setHeader("Access-Control-Max-Age",60)')]),t._v("设置了这个响应头之后，在60秒之内，同类型的请求都将不再发送预检请求，而是使用之前返回的"),s("code",[t._v("Access-Control-Allow-Methods")]),t._v(" 和"),s("code",[t._v("Access-Control-Allow-Headers")]),t._v("提供的结果")]),t._v(" "),s("p",[t._v("以"),s("code",[t._v("node.js")]),t._v("作为后台的跨域头("),s("code",[t._v("express")]),t._v("框架)")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("all")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//哪个源可以访问我")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Origin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//允许携带哪个自定义头访问我，多个自定义头用指尖用逗号隔开")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Headers"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ticket,name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//允许哪种请求方法访问我")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Methods"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PUT,POST,GET,DELETE,OPTIONS"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//允许携带cookie")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Credentials"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//预检请求的存活时间，单位为s（多久之内不再发送预检请求）如果值为 -1，则表示禁用缓存，每一次请求都需要提供预检请求，即用OPTIONS请求进行检测。")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Max-Age"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// options预检请求的优化")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//允许返回的头")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Expose-Headers"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),t._v("）\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这段仅仅为了方便返回json而已")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json;charset=utf-8"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'OPTIONS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//让options请求快速返回")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("常见"),s("code",[t._v("CORS")]),t._v("跨域错误")]),t._v(" "),s("ul",[s("li",[t._v("1、"),s("code",[t._v("The response had HTTP status code 404``options")]),t._v("请求过不去：后端没有支持"),s("code",[t._v("options")]),t._v("请求，需要后端值支持")]),t._v(" "),s("li",[t._v("2、"),s("code",[t._v("The response had HTTP status code 405``options")]),t._v("请求过不去：后端支持"),s("code",[t._v("options")]),t._v("请求，但是一些配置文件(如安全配置)中，阻止了"),s("code",[t._v("options")]),t._v("请求。需要安全配置支持"),s("code",[t._v("options")]),t._v("请求。")]),t._v(" "),s("li",[t._v("3、"),s("code",[t._v("options")]),t._v("请求返回"),s("code",[t._v("200")]),t._v(",但是浏览器报错："),s("code",[t._v("origin")]),t._v("不匹配或者"),s("code",[t._v("headers")]),t._v("不匹配，缺少值。")])])]),t._v(" "),s("h3",{attrs:{id:"_3、websocket-没有域的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、websocket-没有域的"}},[t._v("#")]),t._v(" 3、webSocket(没有域的)")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" ws "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebSocket")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'wx://localhost:3000'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nws"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onopen")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tws"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'我爱你'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nwx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onmessage")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_4、nginx反向代理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、nginx反向代理"}},[t._v("#")]),t._v(" 4、nginx反向代理")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("nginx")]),t._v(" "),s("p",[t._v("利用同源策略对服务器不加限制的原理，使用"),s("code",[t._v("nginx")]),t._v("反向代理实现跨域，是最简单的跨域方式。只需要修改"),s("code",[t._v("nginx")]),t._v("的配置即可解决跨域问题，支持所有浏览器，支持"),s("code",[t._v("session")]),t._v("，不需要修改代码，并且不会影响服务器性能。")]),t._v(" "),s("p",[t._v("实现思路：通过"),s("code",[t._v("nginx")]),t._v("配置一个代理服务器（域名与"),s("code",[t._v("domain1")]),t._v("相同，端口不同）做跳板机，反向代理访问"),s("code",[t._v("domain2")]),t._v("接口，并且可以顺便修改"),s("code",[t._v("cookie")]),t._v("中"),s("code",[t._v("domain")]),t._v("信息，方便当前域"),s("code",[t._v("cookie")]),t._v("写入，实现跨域登录。")])]),t._v(" "),s("h3",{attrs:{id:"_5、代理解决跨域问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、代理解决跨域问题"}},[t._v("#")]),t._v(" 5、代理解决跨域问题")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("开发中常用的"),s("code",[t._v("proxy")]),t._v("代理解决跨域问题，原理是当我们启动项目的时候，"),s("code",[t._v("webpack")]),t._v("内部会用"),s("code",[t._v("http-proxy-middleware")]),t._v("中间件，以我们本机为服务器起一个服务，监听请求的端口。项目发起请求时，请求的是本地的接口，本地接口收到请求后，向实际的接口请求数据，然后再将信息返回给前端。一般都用"),s("code",[t._v("node.js")]),t._v("即可代理。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);