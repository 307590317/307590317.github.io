(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{382:function(t,s,a){"use strict";a.r(s);var e=a(25),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#异步的js"}},[t._v("异步的JS")])]),s("li",[s("a",{attrs:{href:"#全局刷新"}},[t._v("全局刷新")]),s("ul",[s("li",[s("a",{attrs:{href:"#局部刷新"}},[t._v("局部刷新")])])])]),s("li",[s("a",{attrs:{href:"#基于原生js实现ajax"}},[t._v("基于原生JS实现AJAX")]),s("ul",[s("li",[s("a",{attrs:{href:"#ajax请求方式"}},[t._v("AJAX请求方式")]),s("ul",[s("li",[s("a",{attrs:{href:"#ajax第一步"}},[t._v("AJAX第一步")])]),s("li",[s("a",{attrs:{href:"#ajax第二步"}},[t._v("AJAX第二步：")])]),s("li",[s("a",{attrs:{href:"#ajax第三步"}},[t._v("AJAX第三步")])]),s("li",[s("a",{attrs:{href:"#ajax第四步"}},[t._v("AJAX第四步：")])])])]),s("li",[s("a",{attrs:{href:"#xhr-readystate"}},[t._v("xhr.readyState")])]),s("li",[s("a",{attrs:{href:"#xhr-status"}},[t._v("xhr.status")])]),s("li",[s("a",{attrs:{href:"#xhr-responsetext"}},[t._v("xhr.responseText")])]),s("li",[s("a",{attrs:{href:"#ajax属性"}},[t._v("AJAX属性")])]),s("li",[s("a",{attrs:{href:"#ajax方法"}},[t._v("AJAX方法")])]),s("li",[s("a",{attrs:{href:"#ajax事件"}},[t._v("AJAX事件")])])])]),s("li",[s("a",{attrs:{href:"#js中常用的编码解码方法"}},[t._v("JS中常用的编码解码方法")])]),s("li",[s("a",{attrs:{href:"#ajax中的同步异步"}},[t._v("AJAX中的同步异步")])]),s("li",[s("a",{attrs:{href:"#倒计时抢购"}},[t._v("倒计时抢购")]),s("ul",[s("li",[s("a",{attrs:{href:"#jquery中的ajax"}},[t._v("jQuery中的AJAX")])])])])])]),s("p"),t._v(" "),s("h1",{attrs:{id:"_27、ajax基础知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_27、ajax基础知识"}},[t._v("#")]),t._v(" 27、AJAX基础知识")]),t._v(" "),s("blockquote",[s("p",[t._v("什么是"),s("code",[t._v("AJAX")]),t._v("？")]),t._v(" "),s("p",[t._v("async javascript and xml（异步的"),s("code",[t._v("JS")]),t._v("和"),s("code",[t._v("XML")]),t._v("）")]),t._v(" "),s("p",[t._v("客户端JS中的方法，用来向服务器端发送请求（还可以传递给服务器端数据），然后把服务器端返回的内容获取到（一般运行在客户端的浏览器中的）。")]),t._v(" "),s("p",[s("code",[t._v("XML")]),t._v("：可扩展的标记语言（一种数据格式）")]),t._v(" "),s("p",[t._v("利用自己扩展的有规则的标记来存储相关数据的")])]),t._v(" "),s("h2",{attrs:{id:"异步的js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异步的js"}},[t._v("#")]),t._v(" 异步的JS")]),t._v(" "),s("blockquote",[s("p",[t._v("这里的异步不是说"),s("code",[t._v("AJAX")]),t._v("只能基于异步进行请求，这里的异步特指的是局部刷新")])]),t._v(" "),s("h2",{attrs:{id:"全局刷新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局刷新"}},[t._v("#")]),t._v(" 全局刷新")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("全局刷新")]),t._v(" "),s("p",[t._v("所谓的全局刷新就是页面中的每次数据更新，都会从服务器获取到最新的已经渲染好的源代码，然后拿到浏览器中进行展示；")]),t._v(" "),s("p",[s("em",[t._v("[优势]")])]),t._v(" "),s("ul",[s("li",[t._v("1）动态展示的数据在页面的源代码中可以看见，有利于SEO优化推广（有利于搜索引擎的收录和抓取）")]),t._v(" "),s("li",[t._v("2）从服务器获取的结果就已经是最后要呈现的结果了，不需要客户端做额外的事，所以页面加载速度快，（前提是服务器端处理的速度够快）如淘宝、京东的首屏数据一般都是由服务器端渲染")])]),t._v(" "),s("p",[s("em",[t._v("[弊端]")])]),t._v(" "),s("ul",[s("li",[t._v("1）页面中的数据需要实时更新，即使是一张小图片更新，每次也都需要重新刷新一次。")]),t._v(" "),s("li",[t._v("2）都交给服务器端做数据渲染，服务器端的压力大，如果服务器处理不过来，页面呈现的速度更慢")]),t._v(" "),s("li",[t._v("3）全局刷新不利于开发（开发效率低）")])])]),t._v(" "),s("h3",{attrs:{id:"局部刷新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#局部刷新"}},[t._v("#")]),t._v(" 局部刷新")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("局部刷新")]),t._v(" "),s("p",[t._v("前后端完全分离的项目，页面中需要动态绑定的数据是交给客户端完成渲染的：客户端渲染要以下步骤：")]),t._v(" "),s("ul",[s("li",[t._v("1、向服务器端发送AJAX请求")]),t._v(" "),s("li",[t._v("2、把从服务器端获取的数据解析处理，拼接成为我们需要展示的HTML字符串")]),t._v(" "),s("li",[t._v("3、拿拼接好的字符串替换页面中某一部分需要更新的内容（局部刷新），页面整体不需要重新加载，局部渲染即可")])]),t._v(" "),s("p",[s("em",[t._v("[优势]")])]),t._v(" "),s("ul",[s("li",[t._v("1、我们可以根据需求，任意修改页面中某一部分内容（如实时刷新），整体页面不刷新，性能好，体验好（所有表单验证、需要实时刷新的需求都要基于AJAX实现）\n-2、有利于开发，提高开发效率\n"),s("ul",[s("li",[t._v("1）前后端的完全分离，后台不需要考虑前端如何实现，前端也不需要考虑后台用什么技术，真正实现了前后端分离")]),t._v(" "),s("li",[t._v("2）可以同时开发：项目开发开始，先制定前后端数据交互的接口文档（文档中包含了调取哪个接口或者哪些数据等协议规范），后台把接口写好，客户端按照接口调取即可，后台再去实现接口功能即可；")])])])]),t._v(" "),s("p",[s("em",[t._v("[弊端]")])]),t._v(" "),s("ul",[s("li",[t._v("1、不利于SEO优化：第一次从服务器端获取的内容不包含需要动态绑定的数据，不利于"),s("code",[t._v("SEO")]),t._v("收录，后期通过"),s("code",[t._v("JS")]),t._v("添加到页面中的内容，并不会写到源代码中")]),t._v(" "),s("li",[t._v("2、由于需要动态绑定数据后，再交给浏览器渲染。所以没有服务器渲染页面呈现速度快；")])])]),t._v(" "),s("h2",{attrs:{id:"基于原生js实现ajax"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基于原生js实现ajax"}},[t._v("#")]),t._v(" 基于原生JS实现AJAX")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Ajax四步:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" xhr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"get"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/data.txt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v("（）"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v("（xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^2\\d{2}$")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test（xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status））"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("；\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"ajax请求方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax请求方式"}},[t._v("#")]),t._v(" AJAX请求方式")]),t._v(" "),s("h4",{attrs:{id:"ajax第一步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax第一步"}},[t._v("#")]),t._v(" AJAX第一步")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("let xhr=new XMLHttpRequest")])]),t._v(" "),s("p",[t._v("创建一个"),s("code",[t._v("AJAX")]),t._v("对象，IE6以下不支持;")])]),t._v(" "),s("h4",{attrs:{id:"ajax第二步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax第二步"}},[t._v("#")]),t._v(" AJAX第二步：")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[s("code",[t._v("xhr.open(method,url,async,username,userpass)")]),t._v("\n第二步代表发送前的基本信息配置（并没有发送请求）。"),s("code",[t._v("open")]),t._v("方法中的参数详解如下：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("method")]),t._v("：请求方式（以下方法都可以从服务器获取数据，也可以向服务器传递数据）\n"),s("ul",[s("li",[s("code",[t._v("GET")]),t._v("：一般用于从服务器获取数据（也可以向服务器发送数据）")]),t._v(" "),s("li",[s("code",[t._v("POST")]),t._v("：一般用于向服务器推送数据")]),t._v(" "),s("li",[s("code",[t._v("PUT")]),t._v("：用于给服务器上增加资源文件（上传图片）")]),t._v(" "),s("li",[s("code",[t._v("DELETE")]),t._v("：用于从服务器上删除资源文件")]),t._v(" "),s("li",[s("code",[t._v("HEAD")]),t._v("：用于只获取服务器的响应头信息")])])]),t._v(" "),s("li",[s("code",[t._v("url")]),t._v("：请求的"),s("code",[t._v("URL")]),t._v("地址（配置向哪一个服务器地址发送请求）")]),t._v(" "),s("li",[s("code",[t._v("async")]),t._v("：是否为异步（true代表异步，false代表同步，默认为true）")]),t._v(" "),s("li",[t._v("用户名和密码：这两个参数一般不用，如果你请求的·地址所在的服务器设定了访问权限，则需要我们提供可通行的用户名和密码，才可以（一般服务器都是可以允许匿名访问的）")])]),t._v(" "),s("p",[t._v("总结：")]),t._v(" "),s("p",[s("em",[t._v("GET与POST区别：")])]),t._v(" "),s("ul",[s("li",[t._v("1、大小问题：GET请求传递给服务器的内容大小存在限制而"),s("code",[t._v("POST")]),t._v("理论上没有限制。存在限制的原因是 "),s("em",[t._v("浏览器对URL的长度存在限制")]),t._v("。各浏览器都有自己的URL最大长度限制（谷歌：8KB，火狐：7KB，IE：2KB），超出的部分会被截取；而"),s("code",[t._v("POST")]),t._v("请求一般都是基于 "),s("em",[t._v("设置请求主体")]),t._v("来实现的，理论上"),s("code",[t._v("POST")]),t._v("通过请求主体传递是没有大小限制的；")]),t._v(" "),s("li",[t._v("2、速度的问题：与 "),s("code",[t._v("GET")]),t._v(" 请求相比,"),s("code",[t._v("POST")]),t._v("请求消耗的资源会更多一些。从性能角度来看，以发送相同的数据计,"),s("code",[t._v("GET")]),t._v("请求的速度最多可达到"),s("code",[t._v("POST")]),t._v("请求的两倍")]),t._v(" "),s("li",[t._v("3、缓存的问题："),s("code",[t._v("GET")]),t._v("请求会出现缓存（这个缓存不一定是304），会产生缓存是因为"),s("code",[t._v("GET")]),t._v("请求是通过"),s("code",[t._v("URL")]),t._v("问号传参来实现数据传递的（浏览器会根据每次请求时的URL地址与上次请求的地址是否相同，来判定是读取上次请求的缓存，还是再请求一次拿到最新数据）；"),s("code",[t._v("POST")]),t._v("是没有缓存的。如何解决"),s("code",[t._v("GET")]),t._v("请求出现缓存：在"),s("code",[t._v("URL")]),t._v("的末尾追加一个随机数；")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ajax")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ul",[s("li",[t._v("4、安全问题: 一般来说"),s("code",[t._v("GET")]),t._v("不安全，"),s("code",[t._v("GET")]),t._v("请求是通过"),s("code",[t._v("URL")]),t._v("传参把数据传递给服务器，用户名和密码将明文出现在"),s("code",[t._v("URL")]),t._v("上，而黑客可通过"),s("code",[t._v("URL")]),t._v("劫持获取到"),s("code",[t._v("get")]),t._v("请求问号传参传递的内容。数据不太安全而"),s("code",[t._v("POST")]),t._v("相对安全一些")])])]),t._v(" "),s("h4",{attrs:{id:"ajax第三步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax第三步"}},[t._v("#")]),t._v(" AJAX第三步")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[s("code",[t._v("xhr.onreadystatechange=function(){}")]),t._v("\n此步骤作用：监听"),s("code",[t._v("AJAX状")]),t._v("态改变，获取响应信息(获取响应头信息、获取响应主体信息)")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v("（）"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v("（xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^2\\d{2}$")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test（xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status））"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("；\n")])])])]),t._v(" "),s("h4",{attrs:{id:"ajax第四步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax第四步"}},[t._v("#")]),t._v(" AJAX第四步：")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("xhr.send(null)")])]),t._v(" "),s("p",[t._v("这一步才算发送请求：参数是请求主体中需要传递给服务器的内容")]),t._v(" "),s("p",[t._v("向服务器发送请求的任务，才算开始；")])]),t._v(" "),s("h3",{attrs:{id:"xhr-readystate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xhr-readystate"}},[t._v("#")]),t._v(" xhr.readyState")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("AJAX状态码，代表当前AJAX处理的进度")]),t._v(" "),s("p",[t._v("可能的值如下：")]),t._v(" "),s("ul",[s("li",[t._v("0 ："),s("code",[t._v("UNSENT")]),t._v(" 当前的请求还没发送(未调用"),s("code",[t._v("open")]),t._v("方法)")]),t._v(" "),s("li",[t._v("1 ："),s("code",[t._v("OPENED URL")]),t._v("地址已经打开（已调用"),s("code",[t._v("open")]),t._v("方法未调用"),s("code",[t._v("send")]),t._v("方法）")]),t._v(" "),s("li",[t._v("2 ："),s("code",[t._v("HEADERS_RECEIVED")]),t._v(" 当前"),s("code",[t._v("AJAX")]),t._v("的请求已经发送，并且已经接收到服务器端返回的响应头信息了（已经调用"),s("code",[t._v("send")]),t._v("方法，2的时候就已经可以拿到响应头信息了）")]),t._v(" "),s("li",[t._v("3 ："),s("code",[t._v("LOADING")]),t._v(" 已经接收到部分响应数据")]),t._v(" "),s("li",[t._v("4 ："),s("code",[t._v("DONE")]),t._v(" 响应主体的内容已经成功返回到客户端")])])]),t._v(" "),s("h3",{attrs:{id:"xhr-status"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xhr-status"}},[t._v("#")]),t._v(" xhr.status")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("HTTP网络状态码，描述了当前服务器返回信息的状态，")]),t._v(" "),s("p",[t._v("可能的值如下：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("200 或者"),s("code",[t._v("^2\\d{2}")]),t._v("：  (200或以2开头的)都代表响应主体的内容已经返回成功")])]),t._v(" "),s("li",[s("p",[t._v("以3开头的也算请求成功，只不过服务器端做了很多特殊的处理")]),t._v(" "),s("ul",[s("li",[t._v("301：永久重定向/永久转移（一般用于域名迁移）")]),t._v(" "),s("li",[t._v("302：临时重定向/临时转移(一般用于服务器的负载均衡，当服务器访问量过大，就把当前的请求临时交给其他服务器处理)")]),t._v(" "),s("li",[t._v("303：表示请求的资源路径发生改变，使用"),s("code",[t._v("GET")]),t._v("方法请求新"),s("code",[t._v("url")]),t._v("。她与"),s("code",[t._v("302")]),t._v("的功能一样，但是明确指出使用"),s("code",[t._v("GET")]),t._v("方法请求新"),s("code",[t._v("url")]),t._v("。")]),t._v(" "),s("li",[t._v("304：本次获取的内容是读取缓存中的数据（把一些不经常更新的文件或者内容缓存到浏览器中，下一次从缓存中获取，减轻服务器压力，也提高了页面加载速度）")]),t._v(" "),s("li",[t._v("307: 表示请求的资源路径临时发生改变，要求浏览器后续的请求应仍使用原本的"),s("code",[t._v("method")]),t._v("。可以确保请求方法和消息主体不会发生变化。")]),t._v(" "),s("li",[t._v("308: 表示请求的资源路径永久性的发生改变，要求浏览器后续的请求应仍使用原本的"),s("code",[t._v("method")]),t._v("。可以确保请求方法和消息主体不会发生变化。")])])]),t._v(" "),s("li",[s("p",[t._v("以4开头的一般都是失败，而且客户端的问题偏大")]),t._v(" "),s("ul",[s("li",[t._v("400：客户端传递给服务器端的参数出现错误")]),t._v(" "),s("li",[t._v("401：无权限访问")]),t._v(" "),s("li",[t._v("404：要访问地址不存在")])])]),t._v(" "),s("li",[s("p",[t._v("以5开头的一般都是失败，而且服务器端的问题偏大")]),t._v(" "),s("ul",[s("li",[t._v("500：未知的服务器错误")]),t._v(" "),s("li",[t._v("503：服务器已经超负荷")])])])]),t._v(" "),s("p",[s("strong",[t._v("不同状态码对于"),s("code",[t._v("SEO")]),t._v("的影响")])]),t._v(" "),s("ul",[s("li",[t._v("301：当旧页面已经被收录了，使用301跳转到新的页面上，搜索引擎会把旧页面删除，替换成新的页面，并把旧页面的权重排名转移到新页面上，平稳过度。")]),t._v(" "),s("li",[t._v("302：和301的区别在于不会删除旧页面，但是会收录新的页面，不会将旧页面的权重排名转移到新的页面。")]),t._v(" "),s("li",[t._v("304：页面长时间出现大量304的状态码，会影响搜索引擎的信任度，会导致抓取频率和次数下降，页面内容收录速度表面，甚至不收录，网站快速更新变慢，甚至停止快照。网站的关键词排名下降，影响网站权重也下降。")])])]),t._v(" "),s("h3",{attrs:{id:"xhr-responsetext"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xhr-responsetext"}},[t._v("#")]),t._v(" xhr.responseText")]),t._v(" "),s("blockquote",[s("p",[t._v("接收到的响应主体中的内容；")])]),t._v(" "),s("h3",{attrs:{id:"ajax属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax属性"}},[t._v("#")]),t._v(" AJAX属性")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("属性")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("readyState")]),t._v("：存储的是当前"),s("code",[t._v("AJAX")]),t._v("的状态码")]),t._v(" "),s("li",[s("code",[t._v("response/responseText/responseXML")]),t._v("：都是用来接收服务器返回的响应主体中的内容，只是格式不一样\n"),s("ul",[s("li",[s("code",[t._v("responseText")]),t._v("：是最常用的，接收到的结果是字符串格式的（一般服务器返回的数据都是JSON格式字符串）")]),t._v(" "),s("li",[s("code",[t._v("responseXML")]),t._v("偶尔会用到，如果服务器返回的是"),s("code",[t._v("XML")]),t._v("文档数据，需要用此属性接收")])])]),t._v(" "),s("li",[s("code",[t._v("status")]),t._v("：服务器返回的"),s("code",[t._v("HTTP")]),t._v("状态码")]),t._v(" "),s("li",[s("code",[t._v("statusText")]),t._v("：对返回状态码的描述")]),t._v(" "),s("li",[s("code",[t._v("timeout")]),t._v("：设置当前"),s("code",[t._v("AJAX")]),t._v("请求的超时时间，表示请求在等待响应多少毫秒之后就终止。在给"),s("code",[t._v("timeout")]),t._v(" 设置一个数值后，如果在规定的时间内浏览器还没有接收到响应，那么就会触发 "),s("code",[t._v("timeout")]),t._v("事件")])])]),t._v(" "),s("h3",{attrs:{id:"ajax方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax方法"}},[t._v("#")]),t._v(" AJAX方法")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("方法")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("abort")]),t._v("：强制中断AJAX请求")]),t._v(" "),s("li",[s("code",[t._v("open")]),t._v("：打开一个URL地址")]),t._v(" "),s("li",[s("code",[t._v("send")]),t._v("：发送AJAX请求（参数是请求主体中传递给服务器的内容）")]),t._v(" "),s("li",[s("code",[t._v("getAllResponseHeaders")]),t._v("：获取全部的响应头信息（结果为字符串文本）")]),t._v(" "),s("li",[s("code",[t._v("getResponseHeader(key)")]),t._v("：获取指定属性名的响应头信息")]),t._v(" "),s("li",[s("code",[t._v("setRequestHeader(key,value)")]),t._v("：设置请求头信息（可以是自定义的请求头）")]),t._v(" "),s("li",[s("code",[t._v("overrideMimeType")]),t._v("：重写数据的MIME类型")])])]),t._v(" "),s("h3",{attrs:{id:"ajax事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax事件"}},[t._v("#")]),t._v(" AJAX事件")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("事件")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("onabort")]),t._v("："),s("code",[t._v("AJAX")]),t._v("被中断触发此事件")]),t._v(" "),s("li",[s("code",[t._v("onreadyStateChange")]),t._v("："),s("code",[t._v("AJAX")]),t._v("状态发生改变触发此事件")]),t._v(" "),s("li",[s("code",[t._v("ontimeout")]),t._v("：请求超时后触发此事件")])])]),t._v(" "),s("h2",{attrs:{id:"js中常用的编码解码方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js中常用的编码解码方法"}},[t._v("#")]),t._v(" JS中常用的编码解码方法")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("正常的编码解码（非加密）")]),t._v(" "),s("ul",[s("li",[t._v("1、"),s("code",[t._v("escape / unescape")]),t._v("：主要就是把中文汉字进行编码和解码（一般只有JS语言支持：常用于前端页面通信时候的中文汉字编码）")]),t._v(" "),s("li",[t._v("2、"),s("code",[t._v("encodeURI / decodeURI")]),t._v("：基本上所有的编程语言都支持；")]),t._v(" "),s("li",[t._v("3、"),s("code",[t._v("encodeURIComponent / decodeURIComponent")]),t._v("：使用对应的编码替换所有非字母数字字符。")])]),t._v(" "),s("p",[s("em",[t._v("encodeURI与encodeURIComponent的区别：")])]),t._v(" "),s("p",[s("code",[t._v("encodeURI()")]),t._v("编码后的结果是除了空格之外的其他字符都原封不动,只有空格被替换 。而 "),s("code",[t._v("encodeURIComponent()")]),t._v("方法则会使用对应的编码替换所有非字母数字字符。")]),t._v(" "),s("p",[t._v("加密编码解码")]),t._v(" "),s("ul",[s("li",[t._v("1、可逆转加密（一般都是自己定规则）")]),t._v(" "),s("li",[t._v("2、不可逆转加密（基于"),s("code",[t._v("MD5")]),t._v("加密完成，为了安全一般都进行二次加密）")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" str "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.baidu.com/?'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tobj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'我在哪'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.baidu.com/?lx=1'")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//=>把OBJ中的每一项属性名和属性值拼接到URL的末尾（问号传参方式）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" key "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tstr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURIComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("&")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//=>不能使用encodeURI必须使用encodeURIComponent，原因是encodeURI不能编码特殊的字符")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("&$")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("g")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//=>后期获取URL问号参数的时候，我们把获取的值在依次的解码即可")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("myQueryUrlParameter")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("myQueryUrlParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" reg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("[?&]([^?&=]+)(?:=([^?&=]*))?")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("g")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tobj"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("arg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("arg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \t\t\n    obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("decodeURIComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//=>此处获取的时候可以进行解码\t")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("h2",{attrs:{id:"ajax中的同步异步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax中的同步异步"}},[t._v("#")]),t._v(" AJAX中的同步异步")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[s("code",[t._v("Ajax")]),t._v("中的"),s("em",[t._v("同步")]),t._v("：当"),s("code",[t._v("AJAX")]),t._v("任务开始的时候，直到"),s("code",[t._v("readyState")]),t._v("为4的时候任务才结束，此时才可以处理其他的事情；")]),t._v(" "),s("p",[s("code",[t._v("Ajax")]),t._v("中的"),s("em",[t._v("异步")]),t._v("：当"),s("code",[t._v("AJAX")]),t._v("任务开始的时候，不需要等到"),s("code",[t._v("readyState")]),t._v("为4我依然可以继续做其他的任务，并且只有当其他的任务完成后，我们再看"),s("code",[t._v("readyState")]),t._v("是否等于4，到4再做相关操作；\n倒计时抢购时间差如何处理，在异步"),s("code",[t._v("ajax")]),t._v("请求"),s("code",[t._v("readyState")]),t._v("=2的时候拿到服务器时间，减少时间差。")])]),t._v(" "),s("h2",{attrs:{id:"倒计时抢购"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#倒计时抢购"}},[t._v("#")]),t._v(" 倒计时抢购")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getSeverTime")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" xhr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*以2或3开头都算获取成功*/")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^(2|3)\\d{2}$")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*只在第一次的时候获取服务器的时间，下次直接在其基础上+1就行*/")]),t._v("\n        severTime"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getResponseHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"date"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*尽可能的减少时间差*/")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*只获取响应头信息即可，所以请求方式使用head即可，head请求中状态码没有3，因为不需要等待接收响应主体内容*/")]),t._v("\n  xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'json/banner.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//只能使用异步，同步的时候无法在状态为2或3的时候做处理，而我们要获取响应头信息，在状态为2的时候就可以获取了，所以需要异步")]),t._v("\n  xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"jquery中的ajax"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jquery中的ajax"}},[t._v("#")]),t._v(" jQuery中的AJAX")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ajax")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxx.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'get'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*dataType只是我们预设获取结果的类型，无法影响服务器传递给我们的类型，只能拿到服务器的数据后，jQuery再进行转化*/")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dataType")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*是否清除缓存*/")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cache")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*同步还是异步 false代表同步*/")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("async")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*我们可以通过data属性把一些信息传递给服务器；get方式通过问号传参，post通过设置请求主体*/")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*data的值可以为：字符串、对象，如果是对象，JQ会把对象转化为xxx=xxx&xx=xx 这种字符串传递给服务器*/")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*请求成功后（xhr.readyState为2或3开头）才会触发此函数*/")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("complete")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*不管请求是否成功都会触发此函数*/")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);