(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{411:function(v,_,e){"use strict";e.r(_);var c=e(25),s=Object(c.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("p"),_("div",{staticClass:"table-of-contents"},[_("ul",[_("li",[_("a",{attrs:{href:"#ssr优点"}},[v._v("SSR优点")])]),_("li",[_("a",{attrs:{href:"#ssr原理"}},[v._v("SSR原理")])])])]),_("p"),v._v(" "),_("h1",{attrs:{id:"ssr-服务器渲染"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ssr-服务器渲染"}},[v._v("#")]),v._v(" SSR(服务器渲染)")]),v._v(" "),_("blockquote",[_("p",[_("code",[v._v("SSR")]),v._v(": 服务端渲染 在"),_("code",[v._v("node")]),v._v("端对"),_("code",[v._v("vue")]),v._v("页面进行渲染"),_("code",[v._v("HTML")]),v._v("文件 返回给浏览器")])]),v._v(" "),_("h2",{attrs:{id:"ssr优点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ssr优点"}},[v._v("#")]),v._v(" SSR优点")]),v._v(" "),_("blockquote",[_("p",[_("code",[v._v("SEO")]),v._v(" : 不同于"),_("code",[v._v("SPA")]),v._v("的"),_("code",[v._v("HTML")]),v._v("只有一个无实际内容的"),_("code",[v._v("HTML")]),v._v("和一个"),_("code",[v._v("app.js")]),v._v("，"),_("code",[v._v("SSR")]),v._v("生成的"),_("code",[v._v("HTML")]),v._v("是有内容的，这让搜索引擎能够索引到页面内容。")]),v._v(" "),_("p",[v._v("更快内容到达时间 传统的"),_("code",[v._v("SPA")]),v._v("应用是将"),_("code",[v._v("bundle.js")]),v._v("从服务器获取，然后在客户端解析并挂载到"),_("code",[v._v("dom")]),v._v("。而"),_("code",[v._v("SSR")]),v._v("直接将"),_("code",[v._v("HTML")]),v._v("字符串传递给浏览器。大大加快了首屏加载时间。")])]),v._v(" "),_("h2",{attrs:{id:"ssr原理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ssr原理"}},[v._v("#")]),v._v(" SSR原理")]),v._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[v._v("TIP")]),v._v(" "),_("p",[v._v("在打包的时候会打包出来两套代码，一套客户端代码，一套服务端代码，服务端的"),_("code",[v._v("html")]),v._v("模板有对应的占位符("),_("code",[v._v("\x3c!--vue-ssr-outlet--\x3e")]),v._v(")，以便渲染完成之后替换掉占位符，生成完整的"),_("code",[v._v("HTML")]),v._v("文件。\n服务端打包出的文件不需要引入打包出的"),_("code",[v._v("js")]),v._v("，需要用"),_("code",[v._v("excludeChunks")]),v._v("排除"),_("code",[v._v("js")]),v._v("。\n服务端打包出的"),_("code",[v._v("server.boundle.js")]),v._v("是用来给"),_("code",[v._v("node")]),v._v("端读取("),_("code",[v._v("fs.readFileSync")]),v._v(")字符串来生成完整的"),_("code",[v._v("HTML")]),v._v("页面的，所以打包的时候写配置"),_("code",[v._v('target:"node"')]),v._v("，以及"),_("code",[v._v("output:{ libraryTarget:'commonjs2' }")]),v._v("。")]),v._v(" "),_("p",[v._v("客户端激活"),_("code",[v._v("js")]),v._v(":需要在根元素上写一个"),_("code",[v._v("id='app'")]),v._v("，以便客户端执行注入的"),_("code",[v._v("js")]),v._v("时能找到对应挂载的节点。\n客户端注入"),_("code",[v._v("js")]),v._v(":通过"),_("code",[v._v("html-webpack-plugin")]),v._v("这个插件，在"),_("code",[v._v("webpack.server.js")]),v._v("中配置插件的"),_("code",[v._v("client")]),v._v("字段路径为客户端打包出来的"),_("code",[v._v("client.boundke.js")]),v._v("，然后需要在服务端的"),_("code",[v._v("html")]),v._v("里采用"),_("code",[v._v("ejs")]),v._v("的方式写一个"),_("code",[v._v("script")]),v._v("，\n"),_("code",[v._v('<script src="<%=htmlWebpackPlugin.options.client%>"><script>')]),v._v(",这样在"),_("code",[v._v("webpack")]),v._v("打包完成后，就会自动把"),_("code",[v._v("src")]),v._v("的值替换为"),_("code",[v._v("html-webpack-plugin")]),v._v("插件"),_("code",[v._v("client")]),v._v("的值。")])])])}),[],!1,null,null,null);_.default=s.exports}}]);