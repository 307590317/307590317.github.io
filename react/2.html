<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React路由 | MrZhao&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/assets/logo.jpg">
    <meta name="description" content="个人博客">
    
    <link rel="preload" href="/assets/css/0.styles.ddf5beda.css" as="style"><link rel="preload" href="/assets/js/app.acb235b1.js" as="script"><link rel="preload" href="/assets/js/2.d372d77b.js" as="script"><link rel="preload" href="/assets/js/1.37fa4b6c.js" as="script"><link rel="preload" href="/assets/js/90.1ec59b21.js" as="script"><link rel="prefetch" href="/assets/js/10.82b2071b.js"><link rel="prefetch" href="/assets/js/100.e63403ed.js"><link rel="prefetch" href="/assets/js/101.f5129fd2.js"><link rel="prefetch" href="/assets/js/102.d0ddf2d8.js"><link rel="prefetch" href="/assets/js/103.9926bfcb.js"><link rel="prefetch" href="/assets/js/104.af476e27.js"><link rel="prefetch" href="/assets/js/105.c8937ef6.js"><link rel="prefetch" href="/assets/js/106.1397eb8d.js"><link rel="prefetch" href="/assets/js/107.9afde75e.js"><link rel="prefetch" href="/assets/js/108.cb71564c.js"><link rel="prefetch" href="/assets/js/109.367dbeed.js"><link rel="prefetch" href="/assets/js/11.4dba772f.js"><link rel="prefetch" href="/assets/js/110.49f4bab3.js"><link rel="prefetch" href="/assets/js/111.5d4c672e.js"><link rel="prefetch" href="/assets/js/112.edc0db73.js"><link rel="prefetch" href="/assets/js/113.9852316c.js"><link rel="prefetch" href="/assets/js/114.ffe9fe06.js"><link rel="prefetch" href="/assets/js/115.564724ca.js"><link rel="prefetch" href="/assets/js/116.5cd792a1.js"><link rel="prefetch" href="/assets/js/117.4b4aaf18.js"><link rel="prefetch" href="/assets/js/118.6888441c.js"><link rel="prefetch" href="/assets/js/119.b8950c5c.js"><link rel="prefetch" href="/assets/js/12.27965b5f.js"><link rel="prefetch" href="/assets/js/120.c92b4b7a.js"><link rel="prefetch" href="/assets/js/121.0d5986c2.js"><link rel="prefetch" href="/assets/js/122.e54d395a.js"><link rel="prefetch" href="/assets/js/123.7de3e59a.js"><link rel="prefetch" href="/assets/js/124.aec1c47d.js"><link rel="prefetch" href="/assets/js/125.12be05e6.js"><link rel="prefetch" href="/assets/js/13.4895e118.js"><link rel="prefetch" href="/assets/js/14.efee2099.js"><link rel="prefetch" href="/assets/js/15.08f58c28.js"><link rel="prefetch" href="/assets/js/16.e25cce72.js"><link rel="prefetch" href="/assets/js/17.73af3b17.js"><link rel="prefetch" href="/assets/js/18.a5cd26c5.js"><link rel="prefetch" href="/assets/js/19.5b5def25.js"><link rel="prefetch" href="/assets/js/20.9ae07869.js"><link rel="prefetch" href="/assets/js/21.1f0d465b.js"><link rel="prefetch" href="/assets/js/22.0e74832d.js"><link rel="prefetch" href="/assets/js/23.7d3158db.js"><link rel="prefetch" href="/assets/js/24.83abb9ba.js"><link rel="prefetch" href="/assets/js/25.c853c4de.js"><link rel="prefetch" href="/assets/js/26.e4ede223.js"><link rel="prefetch" href="/assets/js/27.3b00c66b.js"><link rel="prefetch" href="/assets/js/28.123c02f0.js"><link rel="prefetch" href="/assets/js/29.981e7943.js"><link rel="prefetch" href="/assets/js/3.5e61bf8f.js"><link rel="prefetch" href="/assets/js/30.47d8c561.js"><link rel="prefetch" href="/assets/js/31.b0370337.js"><link rel="prefetch" href="/assets/js/32.f5639ab2.js"><link rel="prefetch" href="/assets/js/33.4d982e7e.js"><link rel="prefetch" href="/assets/js/34.476ca9ee.js"><link rel="prefetch" href="/assets/js/35.d6c54e1c.js"><link rel="prefetch" href="/assets/js/36.bb6f614a.js"><link rel="prefetch" href="/assets/js/37.a8ecfac1.js"><link rel="prefetch" href="/assets/js/38.e7d16fe5.js"><link rel="prefetch" href="/assets/js/39.7dc7f49e.js"><link rel="prefetch" href="/assets/js/4.30f14711.js"><link rel="prefetch" href="/assets/js/40.d05cfc3c.js"><link rel="prefetch" href="/assets/js/41.38899e70.js"><link rel="prefetch" href="/assets/js/42.0b533d65.js"><link rel="prefetch" href="/assets/js/43.53d193d3.js"><link rel="prefetch" href="/assets/js/44.3b96fad7.js"><link rel="prefetch" href="/assets/js/45.eef657e9.js"><link rel="prefetch" href="/assets/js/46.b2f1fd36.js"><link rel="prefetch" href="/assets/js/47.9c09556d.js"><link rel="prefetch" href="/assets/js/48.ce176bc3.js"><link rel="prefetch" href="/assets/js/49.f55f1fca.js"><link rel="prefetch" href="/assets/js/5.756b6e8a.js"><link rel="prefetch" href="/assets/js/50.beb1776a.js"><link rel="prefetch" href="/assets/js/51.d31795c1.js"><link rel="prefetch" href="/assets/js/52.19761715.js"><link rel="prefetch" href="/assets/js/53.cf691bec.js"><link rel="prefetch" href="/assets/js/54.69111173.js"><link rel="prefetch" href="/assets/js/55.6a5031d0.js"><link rel="prefetch" href="/assets/js/56.a6d0b60c.js"><link rel="prefetch" href="/assets/js/57.9a437f90.js"><link rel="prefetch" href="/assets/js/58.8f3c8e43.js"><link rel="prefetch" href="/assets/js/59.dc73bd90.js"><link rel="prefetch" href="/assets/js/6.c6e8dcba.js"><link rel="prefetch" href="/assets/js/60.8431e9e8.js"><link rel="prefetch" href="/assets/js/61.31a7a75b.js"><link rel="prefetch" href="/assets/js/62.a78d06bf.js"><link rel="prefetch" href="/assets/js/63.b40afbd7.js"><link rel="prefetch" href="/assets/js/64.cb8ba378.js"><link rel="prefetch" href="/assets/js/65.608bc3be.js"><link rel="prefetch" href="/assets/js/66.c430f2d9.js"><link rel="prefetch" href="/assets/js/67.96a5041b.js"><link rel="prefetch" href="/assets/js/68.d152d1b8.js"><link rel="prefetch" href="/assets/js/69.54bd8d5c.js"><link rel="prefetch" href="/assets/js/7.b18f4475.js"><link rel="prefetch" href="/assets/js/70.d10c0bb6.js"><link rel="prefetch" href="/assets/js/71.1b530077.js"><link rel="prefetch" href="/assets/js/72.76b37ee5.js"><link rel="prefetch" href="/assets/js/73.1d72d0ea.js"><link rel="prefetch" href="/assets/js/74.136395b3.js"><link rel="prefetch" href="/assets/js/75.163b827e.js"><link rel="prefetch" href="/assets/js/76.29c6b42d.js"><link rel="prefetch" href="/assets/js/77.ce9ee614.js"><link rel="prefetch" href="/assets/js/78.299f9cda.js"><link rel="prefetch" href="/assets/js/79.fe755e03.js"><link rel="prefetch" href="/assets/js/80.1884cea8.js"><link rel="prefetch" href="/assets/js/81.68edf7ac.js"><link rel="prefetch" href="/assets/js/82.a4b444d1.js"><link rel="prefetch" href="/assets/js/83.055b0579.js"><link rel="prefetch" href="/assets/js/84.6d10a5cc.js"><link rel="prefetch" href="/assets/js/85.56cc70f5.js"><link rel="prefetch" href="/assets/js/86.46400f67.js"><link rel="prefetch" href="/assets/js/87.0e8035e0.js"><link rel="prefetch" href="/assets/js/88.e86cd82a.js"><link rel="prefetch" href="/assets/js/89.1115943f.js"><link rel="prefetch" href="/assets/js/91.92c56bfd.js"><link rel="prefetch" href="/assets/js/92.98f06763.js"><link rel="prefetch" href="/assets/js/93.efccb64b.js"><link rel="prefetch" href="/assets/js/94.bd47fc37.js"><link rel="prefetch" href="/assets/js/95.1aedc256.js"><link rel="prefetch" href="/assets/js/96.f7ec82ea.js"><link rel="prefetch" href="/assets/js/97.1903528c.js"><link rel="prefetch" href="/assets/js/98.b1d996fc.js"><link rel="prefetch" href="/assets/js/99.a7062bf9.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.cc58001a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ddf5beda.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">MrZhao's blog</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feBase/js/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/ES6/base.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/feBase/css/1.html" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/feBase/browser/1.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/feBase/mini/1.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/react/1.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  SSR
</a></li><li class="dropdown-item"><!----> <a href="/cloudflare/tunnel.html" class="nav-link">
  Cloudflare
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="打包工具" class="dropdown-title"><span class="title">打包工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="打包工具" class="mobile-dropdown-title"><span class="title">打包工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/base.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/rollup/base.html" class="nav-link">
  Rollup
</a></li></ul></div></div><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/leetcode/array.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/test/" class="nav-link">
  常见问题
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feBase/js/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/ES6/base.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/feBase/css/1.html" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/feBase/browser/1.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/feBase/mini/1.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/react/1.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  SSR
</a></li><li class="dropdown-item"><!----> <a href="/cloudflare/tunnel.html" class="nav-link">
  Cloudflare
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="打包工具" class="dropdown-title"><span class="title">打包工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="打包工具" class="mobile-dropdown-title"><span class="title">打包工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/base.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/rollup/base.html" class="nav-link">
  Rollup
</a></li></ul></div></div><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/leetcode/array.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/test/" class="nav-link">
  常见问题
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react/1.html" class="sidebar-link">React基础</a></li><li><a href="/react/2.html" aria-current="page" class="active sidebar-link">React路由</a></li><li><a href="/react/3.html" class="sidebar-link">React之redux(数据管理)</a></li><li><a href="/react/4.html" class="sidebar-link">React之domdiff策略</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#react路由的安装">react路由的安装</a></li><li><a href="#react路由的使用">react路由的使用</a><ul><li><a href="#路由容器组件">路由容器组件</a></li><li><a href="#route组件">Route组件</a></li><li><a href="#switch-组件">Switch 组件</a></li><li><a href="#redirect-组件">Redirect 组件</a></li><li><a href="#link-组件">Link 组件</a></li><li><a href="#navlink-组件">NavLink 组件</a></li></ul></li><li><a href="#二级路由">二级路由</a></li><li><a href="#路径跳转与路径参数">路径跳转与路径参数</a><ul><li><a href="#路径参数">路径参数</a></li><li><a href="#如何在路径中加入参数">如何在路径中加入参数</a></li><li><a href="#withrouter-组件">withRouter 组件</a></li><li><a href="#受保护的路由">受保护的路由</a></li></ul></li></ul></div><p></p> <h1 id="react路由"><a href="#react路由" class="header-anchor">#</a> React路由</h1> <div class="custom-block tip"><p class="custom-block-title">跳转方式</p> <p>前端自己处理页面跳转都是两种方式：</p> <ul><li>1、通过哈希值（带有'<code>#</code>'）：开发时使用<code>hash</code>，不会导致<code>404</code>错误，但是不支持<code>SEO</code></li> <li>2、<code>h5</code>提供的<code>historyApi</code>（不带'<code>#</code>'）：上线采用<code>h5</code>的跳转</li></ul></div> <h2 id="react路由的安装"><a href="#react路由的安装" class="header-anchor">#</a> react路由的安装</h2> <div class="custom-block tip"><p class="custom-block-title">安装</p> <ul><li>1、安装路由模块
<ul><li><code>yarn add react-router-dom</code></li></ul></li> <li>2、在组件中导入存放路由的容器
<ul><li>常用的有两个容器：
<ul><li>1、<code>HashRouter</code>。</li> <li>2、<code>RrowseRouter</code>。</li> <li>3、<code>MemoryRouter</code>: 在内存中管理<code>history</code>，地址栏不会变化。在<code>reactNative</code>中使用。</li></ul></li></ul></li></ul> <p>上线的时候使用<code>h5</code>
我们开发的时候常用的是<code>HashRouter</code></p></div> <h2 id="react路由的使用"><a href="#react路由的使用" class="header-anchor">#</a> react路由的使用</h2> <blockquote><p><code>react</code>路由也提供了对应的两种容器</p></blockquote> <h3 id="路由容器组件"><a href="#路由容器组件" class="header-anchor">#</a> 路由容器组件</h3> <blockquote><p><code>HashRouter</code>和<code>RrowseRouter</code>是两个路由容器组件，我们要在路由容器中使用<code>Route</code>组件来定义路由；（一个<code>Router</code>容器中只能有一个根元素，所以要在多个路由外面包一层）</p></blockquote> <h3 id="route组件"><a href="#route组件" class="header-anchor">#</a> Route组件</h3> <div class="custom-block tip"><p class="custom-block-title">路由组件</p> <p><code>Route</code>组件是一条条的路由，在<code>Route</code>中我们使用<code>path</code>定义路径，并使用<code>component</code>指定当路径匹配时需要加载的组件；</p> <p><code>Route</code>组件有 <em><code>exact</code></em> 属性,如果值为<code>true</code>，则只有路径完全匹配时才渲染某个组件</p> <p>路由的匹配规则：匹配路径的时候会一个路由一个路由的匹配，只要路径匹配上就加载对应的组件；不管第一个是否匹配上了，都会匹配第二个，直到匹配完所有路由；</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token comment">//路由的两种方式：</span>
<span class="token comment">//1、哈希值</span>
<span class="token comment">//2、h5内置的history</span>
<span class="token comment">//HashRouter和BrowRouter是路由的容器，是组件，包在路由外面</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>HashRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span>Route<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>列表<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Profile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>个人中心<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>用户<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/*当路径匹配的时候,会渲染对应的组件，路径是从上到下匹配的，一个路由一个路由的匹配，只要路径匹配上就渲染对应的组件*/</span><span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token comment">/*如果想要路径完全匹配时才渲染某个组件的话需要添加exact属性为true*/</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/p'</span> exact<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>  component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* 可以匹配到 /list/1   /lista 是匹配不到的*/</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/list'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>List<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/profile'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Profile<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/user'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>User<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>一般情况下，我们在<code>src</code>目录下的<code>index.js</code>中配置路由即可</p></div> <h3 id="switch-组件"><a href="#switch-组件" class="header-anchor">#</a> <code>Switch</code> 组件</h3> <div class="custom-block tip"><p class="custom-block-title">Switch</p> <p>由于路由的匹配规则是一个个的进行匹配，而我们想要的是匹配了一个路由之后剩下的就不会再进行匹配，对此，<code>react-router-dom</code>中提供给我们<code>Switch组件</code>来实现我们想要的功能；</p> <p>用法：需要把<code>Switch组件</code>包在所有<code>Route</code>的外层</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span><span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom<span class="token punctuation">,</span><span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>HashRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span>Route<span class="token punctuation">,</span>Switch<span class="token punctuation">,</span>Redirect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./containers/App&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./containers/Home'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Profile <span class="token keyword">from</span> <span class="token string">'./containers/Profile'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> User <span class="token keyword">from</span> <span class="token string">'./containers/User'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'bootstrap/dist/css/bootstrap.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Detail <span class="token keyword">from</span> <span class="token string">&quot;./containers/Detail&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ProtectedRoute <span class="token keyword">from</span> <span class="token string">&quot;./containers/ProtectedRoute&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//switch的作用是让Route匹配后就停止匹配下面的内容</span>
<span class="token comment">//exact确切的 表示只有路径完全相等时才匹配</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
<span class="token punctuation">{</span><span class="token comment">/* 这样写的话App组件render的时候就要把this.props.children写到返回的标签当中，才能渲染路由 */</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span>App<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/'</span> exact<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>  
      <span class="token punctuation">{</span><span class="token comment">/*路径匹配是匹配两个'/'中间的内容而不是只匹配一个字母*/</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/p'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/profile'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Profile<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/detail/:id'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/*如果匹配不到的话会走最后一个(路径不会更改)*/</span><span class="token punctuation">}</span>
      <span class="token punctuation">{</span><span class="token comment">/*&lt;Route component={Home}/&gt;(和下面的Redirect只能出现一个)*/</span><span class="token punctuation">}</span>
      <span class="token punctuation">{</span><span class="token comment">/*如果匹配不到的话会走最后一个(路径会更改)*/</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">'/'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>App<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span><span class="token punctuation">,</span>window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <h3 id="redirect-组件"><a href="#redirect-组件" class="header-anchor">#</a> <code>Redirect</code> 组件</h3> <div class="custom-block tip"><p class="custom-block-title">Redirect</p> <p>当用户随意输入路径的时候，我们不希望出现<code>404</code>页面，此时我们就需要用到<code>Redirect组件</code>，将页面重定向到指定的路径，渲染指定的组件</p> <p>用法：我们可以写成路由的最后一条，当上面的路由都没匹配到的话，会走最后一个，重定向到我们指定的路径；</p> <p><code>Redirect</code>的<code>to</code>属性可以写成两种方式</p> <ul><li>1、字符串（直接写成一个路径）</li> <li>2、写成一个对象<code>to={pathname:'/login',from:props.match.url}</code></li></ul> <p><code>form</code>属性用来记录当前匹配的路径，为了以后能再跳转到当前路径；</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">render</span><span class="token punctuation">(</span>
<span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>App<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/'</span> exact<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>  
  <span class="token punctuation">{</span><span class="token comment">/*路径匹配是匹配两个'/'中间的内容而不是只匹配一个字母*/</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/p'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/profile'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Profile<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/detail/:id'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">{</span><span class="token comment">/*如果匹配不到的话会走最后一个(路径不会更改)*/</span><span class="token punctuation">}</span>
  <span class="token punctuation">{</span><span class="token comment">/*&lt;Route component={Home}/&gt;(和下面的Redirect只能出现一个)*/</span><span class="token punctuation">}</span>
  <span class="token punctuation">{</span><span class="token comment">/*如果匹配不到的话会走最后一个(路径会更改)*/</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">'/'</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token comment">/*（具有重定向功能而且路径会改变）*/</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>App<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span><span class="token punctuation">,</span>window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <h3 id="link-组件"><a href="#link-组件" class="header-anchor">#</a> <code>Link</code> 组件</h3> <div class="custom-block tip"><p class="custom-block-title">Link</p> <p>相当于<code>vue</code>中的<code>router-link</code>组件，使用<code>Link</code>组件可以替代我们自己写的<code>a</code>标签,因为上线后我们会用到<code>browserHistory</code>，跳转需要用到<code>H5</code>的<code>api</code>进行跳转,<code>Link</code>组件是<code>react</code>路由中提供的声明式组件,可以帮我们区分路由的模式来实现路由的跳转。点击的时候会跳转到对应的路径</p> <p>用法：<code>Link</code>的<code>to</code>属性可以写成两种方式</p> <ul><li>1、直接写成字符串</li> <li>2、写成一个对象：<code>to={pathname:'/user',state:&quot;要带过去的内容&quot;}</code>（不仅能写路径，还能配置一些其他属性，比如<code>state</code>属性，跳转到<code>/user</code>这个页面的时候带过去一些内容，只有通过点击路由导航调到对应页面的时候才能带过去内容）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Link<span class="token punctuation">,</span>withRouter<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Nav</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>nav className<span class="token operator">=</span><span class="token string">&quot;navbar navbar-default&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;container-fluid&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;navbar-header&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a className<span class="token operator">=</span><span class="token string">&quot;navbar-brand&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;#&quot;</span><span class="token operator">&gt;</span>
              <span class="token constant">CRM</span>管理系统
            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>ul className<span class="token operator">=</span><span class="token string">&quot;nav navbar-nav&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">'/'</span><span class="token operator">&gt;</span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">pathname</span><span class="token operator">:</span><span class="token string">'/profile'</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>个人中心<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">pathname</span><span class="token operator">:</span><span class="token string">'/user'</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>用户<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">'btn btn-primary'</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>返回首页<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//withRouter会把传入的组件包装成一个Route组件:</span>
<span class="token comment">// 包装后组件实例的props属性上就会有history，loaction，match三个属性（通过路由渲染的会自带这三个属性）</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>Nav<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <h3 id="navlink-组件"><a href="#navlink-组件" class="header-anchor">#</a> <code>NavLink</code> 组件</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>当我们需要给路由导航（<code>Link</code>）添加样式时，我们就要用到<code>NavLink</code>组件；</p> <p>用法：直接将<code>Link</code>标签替换为<code>NavLink</code>标签，然后在<code>index.html</code>中使用规定的类名<code>.active</code>添加样式即可；这样当点击某一个路由导航时，对应的样式就会生效；</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>React App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
      <span class="token selector">.active</span><span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> red <span class="token important">!important</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 组件中的路由导航 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>nav<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>&lt;NavLink to={pathname:'/user/add'}&gt;添加<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NavLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>&lt;NavLink to={pathname:'/user/list'}&gt;列表<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NavLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <h2 id="二级路由"><a href="#二级路由" class="header-anchor">#</a> 二级路由</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>二级路由就是在一级路由渲染的组件中再嵌套路由：由于是在一级路由中嵌套二级路由，所以不需要再写<code>Router</code>，直接写<code>Route</code>即可
<em>注意：</em></p> <p>因为是二级路由，要保证一级路由也同时显示，所以路径开头要和一级路由的路径相同。</p> <p>如果多次点击相同路由时会触发<code>Hash history cannot PUSH the same path</code>;这样的一个警告,这个是无法去除的但是改成<code>BrowserHistory</code>就不会触发此警告了。所以不用担心.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>HashRouter<span class="token punctuation">,</span>Route<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'bootstrap/dist/css/bootstrap.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./components/Home'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Profile <span class="token keyword">from</span> <span class="token string">'./components/Profile'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> User <span class="token keyword">from</span> <span class="token string">'./components/User'</span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>HashRouter<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>App<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token comment">/* 一级路由 */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/profile&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Profile<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/user&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>User<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>App<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>HashRouter<span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 此组件是由路由渲染的</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Route<span class="token punctuation">,</span>Link<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
<span class="token keyword">import</span> UserList <span class="token keyword">from</span> <span class="token string">'./UserList'</span>
<span class="token keyword">import</span> UserAdd <span class="token keyword">from</span> <span class="token string">'./UserAdd'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;row&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;col-md-2&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;nav nav-stacked&quot;</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* 二级路由的导航 */</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">'/user/list'</span><span class="token operator">&gt;</span>用户列表<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">'/user/add'</span><span class="token operator">&gt;</span>增加用户<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;col-md-10&quot;</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* 二级路由 */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/user/list&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>UserList<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/user/add&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>UserAdd<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <h2 id="路径跳转与路径参数"><a href="#路径跳转与路径参数" class="header-anchor">#</a> 路径跳转与路径参数</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>通过<code>Route</code>渲染的组件，组件实例的<code>props</code>属性上会多出三个路由属性：<code>history，match，loaction</code>；三个值都是对象类型的</p> <ul><li><code>history</code>：提供了很多跳转的方法；
<ul><li>1、<code>go</code></li> <li>2、<code>goBack</code></li> <li>3、<code>push</code></li></ul></li> <li><code>match</code>：包含关于<code>Route</code>与<code>URL</code>匹配的相关信息
<ul><li>1、<code>path</code>：路由匹配的路径</li> <li>2、<code>url</code>：当前的路径</li> <li>3、<code>isExact</code>：<code>path</code>和<code>url</code>是否完全匹配，完全匹配时返回<code>true</code>；</li> <li>4、<code>params</code>：默认是空对象，如果<code>Route</code>的<code>path</code>是路径参数的形式，则和<code>url</code>匹配后会产生一个对象,覆盖默认的空对象；</li></ul></li> <li><code>loaction</code>：存储着与当前页面相关的信息
<ul><li>1、<code>hash</code>值</li> <li>2、<code>pathname</code>（路径）</li> <li>3、<code>state</code>（点击路由跳转到当前页面时从路由页面传递过来的数据）</li></ul></li></ul></div> <h3 id="路径参数"><a href="#路径参数" class="header-anchor">#</a> 路径参数</h3> <div class="custom-block tip"><p class="custom-block-title">放在路径中的参数</p> <p>当我们需要在路径中放入参数的时候，由于放入的参数是不确定的，所以不能把<code>Route</code>的匹配路径写死，此时就用到了路径参数(类似于正则)；
<em>注意</em>：</p> <p>所有匹配到的参数都会放在<code>match.params</code>的属性上，可以通过<code>this.props.match.params</code>来获取，获取到的值都是字符串类型的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//如果路径写成了路径参数的形式，那么和路径匹配后就会产生一个对象</span>
<span class="token comment">//下面的路径detail后面的a的值必须要有，前面加了一个' : '意思是a可以代表任何值</span>
 <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/detail/:a'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">/</span>detail<span class="token operator">/</span><span class="token number">1</span>  <span class="token literal-property property">和以上路由匹配后会产生一个对象，可用以下方式获取到</span><span class="token operator">:</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'1'</span><span class="token punctuation">}</span>
<span class="token comment">//params的属性名来自于Route路径中':'后面的值，属性值来自于客户端路径中对应的值</span>
</code></pre></div></div> <h3 id="如何在路径中加入参数"><a href="#如何在路径中加入参数" class="header-anchor">#</a> 如何在路径中加入参数</h3> <blockquote><p>在<code>Link</code>组件跳转的时候，直接把需要添加的参数采用模版字符串或者字符串拼接的方式追加到路径后即可</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> item<span class="token operator">=</span><span class="token punctuation">{</span>id：<span class="token number">1</span><span class="token punctuation">}</span>；
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{pathname:`/detail/${item.id}`}</span><span class="token punctuation">&gt;</span></span>跳转到对应路径<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="withrouter-组件"><a href="#withrouter-组件" class="header-anchor">#</a> <code>withRouter</code> 组件</h3> <blockquote><p><code>withRouter</code>是一个高阶组件，会把传入的组件的包装成一个<code>Route</code>组件，包装后组件实例的<code>props</code>属性上会多出三个路由属性：<code>history，match，loaction</code>；我们想实现一些如跳转的功能就可以使用这些属性</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>withRouter<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>Nav<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="受保护的路由"><a href="#受保护的路由" class="header-anchor">#</a> 受保护的路由</h3> <blockquote><p>当我们需要权限才能通过路由渲染一些组件的时候，我们就需要用到高阶组件的思想，在需要权限才能渲染的组件外面包一层，在包的那层路由中做判断，当有权限时再渲染对应的组件；</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span><span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom<span class="token punctuation">,</span><span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>HashRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span>Route<span class="token punctuation">,</span>Switch<span class="token punctuation">,</span>Redirect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ProtectedRoute <span class="token keyword">from</span> <span class="token string">&quot;./containers/ProtectedRoute&quot;</span><span class="token punctuation">;</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
	  <span class="token operator">&lt;</span>App<span class="token operator">&gt;</span>
	    <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
	      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/'</span> exact<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
     <span class="token punctuation">{</span><span class="token comment">/*user组件必须有权限才能渲染：localStorage中能获取到login代表登录可以访问user，没有就返回首页，ProtectedRoute 就是我们在外面包的那一层保护路由*/</span><span class="token punctuation">}</span>
	      <span class="token operator">&lt;</span>ProtectedRoute path<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'/user'</span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>User<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/detail/:id'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	    <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
	  <span class="token operator">&lt;</span><span class="token operator">/</span>App<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span><span class="token punctuation">,</span>window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>

 
<span class="token comment">//ProtectedRoute组件 </span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>withRouter<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
<span class="token keyword">class</span> <span class="token class-name">ProtectedRoute</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> login<span class="token operator">=</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>login<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//没登录跳转到首页</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>path<span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>Component<span class="token punctuation">}</span><span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component<span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//由于要用到路由的跳转功能所以需要用withRouter包装成路由组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>ProtectedRoute<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/19/2020, 11:40:50 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/react/1.html" class="prev">
        React基础
      </a></span> <span class="next"><a href="/react/3.html">
        React之redux(数据管理)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.acb235b1.js" defer></script><script src="/assets/js/2.d372d77b.js" defer></script><script src="/assets/js/1.37fa4b6c.js" defer></script><script src="/assets/js/90.1ec59b21.js" defer></script>
  </body>
</html>
