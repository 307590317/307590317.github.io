<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React基础 | MrZhao&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/assets/logo.jpg">
    <meta name="description" content="个人博客">
    
    <link rel="preload" href="/assets/css/0.styles.ddf5beda.css" as="style"><link rel="preload" href="/assets/js/app.acb235b1.js" as="script"><link rel="preload" href="/assets/js/2.d372d77b.js" as="script"><link rel="preload" href="/assets/js/1.37fa4b6c.js" as="script"><link rel="preload" href="/assets/js/89.1115943f.js" as="script"><link rel="prefetch" href="/assets/js/10.82b2071b.js"><link rel="prefetch" href="/assets/js/100.e63403ed.js"><link rel="prefetch" href="/assets/js/101.f5129fd2.js"><link rel="prefetch" href="/assets/js/102.d0ddf2d8.js"><link rel="prefetch" href="/assets/js/103.9926bfcb.js"><link rel="prefetch" href="/assets/js/104.af476e27.js"><link rel="prefetch" href="/assets/js/105.c8937ef6.js"><link rel="prefetch" href="/assets/js/106.1397eb8d.js"><link rel="prefetch" href="/assets/js/107.9afde75e.js"><link rel="prefetch" href="/assets/js/108.cb71564c.js"><link rel="prefetch" href="/assets/js/109.367dbeed.js"><link rel="prefetch" href="/assets/js/11.4dba772f.js"><link rel="prefetch" href="/assets/js/110.49f4bab3.js"><link rel="prefetch" href="/assets/js/111.5d4c672e.js"><link rel="prefetch" href="/assets/js/112.edc0db73.js"><link rel="prefetch" href="/assets/js/113.9852316c.js"><link rel="prefetch" href="/assets/js/114.ffe9fe06.js"><link rel="prefetch" href="/assets/js/115.564724ca.js"><link rel="prefetch" href="/assets/js/116.5cd792a1.js"><link rel="prefetch" href="/assets/js/117.4b4aaf18.js"><link rel="prefetch" href="/assets/js/118.6888441c.js"><link rel="prefetch" href="/assets/js/119.b8950c5c.js"><link rel="prefetch" href="/assets/js/12.27965b5f.js"><link rel="prefetch" href="/assets/js/120.c92b4b7a.js"><link rel="prefetch" href="/assets/js/121.0d5986c2.js"><link rel="prefetch" href="/assets/js/122.e54d395a.js"><link rel="prefetch" href="/assets/js/123.7de3e59a.js"><link rel="prefetch" href="/assets/js/124.aec1c47d.js"><link rel="prefetch" href="/assets/js/125.12be05e6.js"><link rel="prefetch" href="/assets/js/13.4895e118.js"><link rel="prefetch" href="/assets/js/14.efee2099.js"><link rel="prefetch" href="/assets/js/15.08f58c28.js"><link rel="prefetch" href="/assets/js/16.e25cce72.js"><link rel="prefetch" href="/assets/js/17.73af3b17.js"><link rel="prefetch" href="/assets/js/18.a5cd26c5.js"><link rel="prefetch" href="/assets/js/19.5b5def25.js"><link rel="prefetch" href="/assets/js/20.9ae07869.js"><link rel="prefetch" href="/assets/js/21.1f0d465b.js"><link rel="prefetch" href="/assets/js/22.0e74832d.js"><link rel="prefetch" href="/assets/js/23.7d3158db.js"><link rel="prefetch" href="/assets/js/24.83abb9ba.js"><link rel="prefetch" href="/assets/js/25.c853c4de.js"><link rel="prefetch" href="/assets/js/26.e4ede223.js"><link rel="prefetch" href="/assets/js/27.3b00c66b.js"><link rel="prefetch" href="/assets/js/28.123c02f0.js"><link rel="prefetch" href="/assets/js/29.981e7943.js"><link rel="prefetch" href="/assets/js/3.5e61bf8f.js"><link rel="prefetch" href="/assets/js/30.47d8c561.js"><link rel="prefetch" href="/assets/js/31.b0370337.js"><link rel="prefetch" href="/assets/js/32.f5639ab2.js"><link rel="prefetch" href="/assets/js/33.4d982e7e.js"><link rel="prefetch" href="/assets/js/34.476ca9ee.js"><link rel="prefetch" href="/assets/js/35.d6c54e1c.js"><link rel="prefetch" href="/assets/js/36.bb6f614a.js"><link rel="prefetch" href="/assets/js/37.a8ecfac1.js"><link rel="prefetch" href="/assets/js/38.e7d16fe5.js"><link rel="prefetch" href="/assets/js/39.7dc7f49e.js"><link rel="prefetch" href="/assets/js/4.30f14711.js"><link rel="prefetch" href="/assets/js/40.d05cfc3c.js"><link rel="prefetch" href="/assets/js/41.38899e70.js"><link rel="prefetch" href="/assets/js/42.0b533d65.js"><link rel="prefetch" href="/assets/js/43.53d193d3.js"><link rel="prefetch" href="/assets/js/44.3b96fad7.js"><link rel="prefetch" href="/assets/js/45.eef657e9.js"><link rel="prefetch" href="/assets/js/46.b2f1fd36.js"><link rel="prefetch" href="/assets/js/47.9c09556d.js"><link rel="prefetch" href="/assets/js/48.ce176bc3.js"><link rel="prefetch" href="/assets/js/49.f55f1fca.js"><link rel="prefetch" href="/assets/js/5.756b6e8a.js"><link rel="prefetch" href="/assets/js/50.beb1776a.js"><link rel="prefetch" href="/assets/js/51.d31795c1.js"><link rel="prefetch" href="/assets/js/52.19761715.js"><link rel="prefetch" href="/assets/js/53.cf691bec.js"><link rel="prefetch" href="/assets/js/54.69111173.js"><link rel="prefetch" href="/assets/js/55.6a5031d0.js"><link rel="prefetch" href="/assets/js/56.a6d0b60c.js"><link rel="prefetch" href="/assets/js/57.9a437f90.js"><link rel="prefetch" href="/assets/js/58.8f3c8e43.js"><link rel="prefetch" href="/assets/js/59.dc73bd90.js"><link rel="prefetch" href="/assets/js/6.c6e8dcba.js"><link rel="prefetch" href="/assets/js/60.8431e9e8.js"><link rel="prefetch" href="/assets/js/61.31a7a75b.js"><link rel="prefetch" href="/assets/js/62.a78d06bf.js"><link rel="prefetch" href="/assets/js/63.b40afbd7.js"><link rel="prefetch" href="/assets/js/64.cb8ba378.js"><link rel="prefetch" href="/assets/js/65.608bc3be.js"><link rel="prefetch" href="/assets/js/66.c430f2d9.js"><link rel="prefetch" href="/assets/js/67.96a5041b.js"><link rel="prefetch" href="/assets/js/68.d152d1b8.js"><link rel="prefetch" href="/assets/js/69.54bd8d5c.js"><link rel="prefetch" href="/assets/js/7.b18f4475.js"><link rel="prefetch" href="/assets/js/70.d10c0bb6.js"><link rel="prefetch" href="/assets/js/71.1b530077.js"><link rel="prefetch" href="/assets/js/72.76b37ee5.js"><link rel="prefetch" href="/assets/js/73.1d72d0ea.js"><link rel="prefetch" href="/assets/js/74.136395b3.js"><link rel="prefetch" href="/assets/js/75.163b827e.js"><link rel="prefetch" href="/assets/js/76.29c6b42d.js"><link rel="prefetch" href="/assets/js/77.ce9ee614.js"><link rel="prefetch" href="/assets/js/78.299f9cda.js"><link rel="prefetch" href="/assets/js/79.fe755e03.js"><link rel="prefetch" href="/assets/js/80.1884cea8.js"><link rel="prefetch" href="/assets/js/81.68edf7ac.js"><link rel="prefetch" href="/assets/js/82.a4b444d1.js"><link rel="prefetch" href="/assets/js/83.055b0579.js"><link rel="prefetch" href="/assets/js/84.6d10a5cc.js"><link rel="prefetch" href="/assets/js/85.56cc70f5.js"><link rel="prefetch" href="/assets/js/86.46400f67.js"><link rel="prefetch" href="/assets/js/87.0e8035e0.js"><link rel="prefetch" href="/assets/js/88.e86cd82a.js"><link rel="prefetch" href="/assets/js/90.1ec59b21.js"><link rel="prefetch" href="/assets/js/91.92c56bfd.js"><link rel="prefetch" href="/assets/js/92.98f06763.js"><link rel="prefetch" href="/assets/js/93.efccb64b.js"><link rel="prefetch" href="/assets/js/94.bd47fc37.js"><link rel="prefetch" href="/assets/js/95.1aedc256.js"><link rel="prefetch" href="/assets/js/96.f7ec82ea.js"><link rel="prefetch" href="/assets/js/97.1903528c.js"><link rel="prefetch" href="/assets/js/98.b1d996fc.js"><link rel="prefetch" href="/assets/js/99.a7062bf9.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.cc58001a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ddf5beda.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">MrZhao's blog</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feBase/js/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/ES6/base.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/feBase/css/1.html" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/feBase/browser/1.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/feBase/mini/1.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/react/1.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  React
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  SSR
</a></li><li class="dropdown-item"><!----> <a href="/cloudflare/tunnel.html" class="nav-link">
  Cloudflare
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="打包工具" class="dropdown-title"><span class="title">打包工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="打包工具" class="mobile-dropdown-title"><span class="title">打包工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/base.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/rollup/base.html" class="nav-link">
  Rollup
</a></li></ul></div></div><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/leetcode/array.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/test/" class="nav-link">
  常见问题
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feBase/js/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/ES6/base.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/feBase/css/1.html" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/feBase/browser/1.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/feBase/mini/1.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/react/1.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  React
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  SSR
</a></li><li class="dropdown-item"><!----> <a href="/cloudflare/tunnel.html" class="nav-link">
  Cloudflare
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="打包工具" class="dropdown-title"><span class="title">打包工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="打包工具" class="mobile-dropdown-title"><span class="title">打包工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/base.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/rollup/base.html" class="nav-link">
  Rollup
</a></li></ul></div></div><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/leetcode/array.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/test/" class="nav-link">
  常见问题
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react/1.html" aria-current="page" class="active sidebar-link">React基础</a></li><li><a href="/react/2.html" class="sidebar-link">React路由</a></li><li><a href="/react/3.html" class="sidebar-link">React之redux(数据管理)</a></li><li><a href="/react/4.html" class="sidebar-link">React之domdiff策略</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#react-脚手架安装">react 脚手架安装</a></li><li><a href="#使用-react-脚手架创建项目">使用 react 脚手架创建项目</a></li><li><a href="#react-和-react-dom-模块">react 和 react-dom 模块</a></li><li><a href="#react-中的-jsx-语法与-render-渲染方法">react 中的 jsx 语法与 render 渲染方法</a><ul><li><a href="#jsx-语法">JSX 语法</a></li><li><a href="#react-createelement">React.createElement</a></li><li><a href="#render">render</a></li></ul></li><li><a href="#react-中的虚拟-dom">react 中的虚拟 DOM</a></li><li><a href="#虚拟-dom-渲染过程-虚拟-dom-真实-dom">虚拟 DOM 渲染过程（虚拟 DOM —&gt;真实 DOM ）</a><ul><li><a href="#_1、构建虚拟dom元素-jsx元素">1、构建虚拟DOM元素（jsx元素）：</a></li><li><a href="#_2、调用render方法把虚拟dom元素渲染成真实的dom结构">2、调用render方法把虚拟DOM元素渲染成真实的DOM结构</a></li></ul></li><li><a href="#react-中的组件">react中的组件</a><ul><li><a href="#_1、第一种方式是函数声明">1、第一种方式是函数声明</a></li><li><a href="#_2、第二种是以类的形式声明">2、第二种是以类的形式声明</a></li></ul></li><li><a href="#组件中属性-props-和状态-state-的区别">组件中属性(props)和状态(state)的区别</a></li><li><a href="#组件的数据来源方式">组件的数据来源方式</a><ul><li><a href="#_1、通过props-属性-获取数据">1、通过props(属性) 获取数据：</a><ul><li><a href="#_2、this-state-状态-状态是组件自己的">2、this.state(状态) 状态是组件自己的</a></li></ul></li></ul></li><li><a href="#复合组件与数据传递">复合组件与数据传递</a><ul><li><a href="#_1、父传子">1、父传子</a><ul><li><a href="#_2、子传父">2、子传父</a></li></ul></li></ul></li><li><a href="#ref-属性">ref 属性</a></li><li><a href="#ref的两种写法">ref的两种写法</a><ul><li><a href="#_1、直接写为一个值">1、直接写为一个值</a></li><li><a href="#_2、写成一个函数的形式">2、写成一个函数的形式</a></li></ul></li><li><a href="#受控组件与非受控组件">受控组件与非受控组件</a><ul><li><a href="#受控组件">受控组件</a></li><li><a href="#非受控组件-基于-ref-来管理">非受控组件（基于 ref 来管理）</a></li></ul></li><li><a href="#受控组件与非受控组件的区别">受控组件与非受控组件的区别</a></li><li><a href="#react-元素中的事件绑定">react 元素中的事件绑定</a></li><li><a href="#react-中的生命周期">React 中的生命周期</a></li><li><a href="#获取组件的所有子节点">获取组件的所有子节点</a></li></ul></div><p></p> <h1 id="react基础"><a href="#react基础" class="header-anchor">#</a> React基础</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>什么是<code>React</code>？</p> <ul><li><code>React</code> 是一个用于构建用户界面的框架（采用的是<code>MVC</code>模式）：集中处理<code>view</code>这一层</li> <li>核心专注于视图,目的实现组件化开发</li></ul> <p>什么是组件化开发？
我们可以很直观的将一个复杂的页面分割成若干个独立组件,每个组件包含自己的逻辑和样式 再将这些独立组件组合完成一个复杂的页面。 这样既减少了逻辑复杂度，又实现了代码的重用</p> <ul><li>可组合</li> <li>可重用</li> <li>可维护</li></ul></div> <h2 id="react-脚手架安装"><a href="#react-脚手架安装" class="header-anchor">#</a> <code>react</code> 脚手架安装</h2> <div class="custom-block tip"><p class="custom-block-title">安装</p> <p>在全局下安装<code>create-react-app</code></p> <p>打开命令行工具输入以下代码</p> <p><code>npm install create-react-app -g</code></p> <p>默认会自动安装<code>React，react-dom</code>两部分</p></div> <h2 id="使用-react-脚手架创建项目"><a href="#使用-react-脚手架创建项目" class="header-anchor">#</a> 使用 <code>react</code> 脚手架创建项目</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>需要在哪个文件夹下创建<code>react</code>项目就在那个项目下打开命令行工具输入以下代码</p> <div class="language-sh extra-class"><pre class="language-sh"><code>create-react-app xxx  <span class="token comment"># xxx为项目名称：不能出现大写字母</span>
<span class="token builtin class-name">cd</span> xxx   <span class="token comment"># 转到项目目录下</span>
<span class="token function">yarn</span> start 或 <span class="token function">npm</span> start <span class="token comment"># 启动项目即可</span>
</code></pre></div></div> <h2 id="react-和-react-dom-模块"><a href="#react-和-react-dom-模块" class="header-anchor">#</a> <code>react</code> 和 <code>react-dom</code> 模块</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>在<code>js</code>文件的顶部导入<code>react</code>和<code>react-dom</code></p> <ul><li><p><code>react</code>：核心模块（生命周期等钩子函数都是在这里定义的）
<code>react</code> 中常用的方法：</p> <ul><li><code>createElement</code>：在<code>shouldComponentUpdate()</code>中实现时，使用了 <code>props</code> 和 <code>state</code> 的浅比较。</li> <li><code>Children</code>：我们可以用<code>React.Children.map</code>去遍历<code>this.props.children</code>获取到的结果</li> <li><code>Component</code>：继承需要用到的</li> <li><code>PureComponent</code>：纯函数</li></ul></li> <li><p><code>react-dom</code>：提供与DOM相关的功能
<code>react-dom</code>中常用的方法：</p> <ul><li><code>render</code> ：是 <code>React</code>的最基本方法，用于将模板转为 <code>HTML</code> 语言，并插入指定的 <code>DOM</code> 节点</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token comment">//核心基础 模块(生命周期)</span>
<span class="token comment">//用来把react元素（jsx元素）渲染成真实的DOM结构并添加到页面当中</span>
<span class="token keyword">import</span> ReactDOM<span class="token punctuation">,</span><span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token comment">//ReactDOM中就一个方法比较常用叫render</span>
<span class="token comment">//可以把render从react-dom中解构出来</span>
</code></pre></div></div> <h2 id="react-中的-jsx-语法与-render-渲染方法"><a href="#react-中的-jsx-语法与-render-渲染方法" class="header-anchor">#</a> <code>react</code> 中的 <code>jsx</code> 语法与 <code>render</code> 渲染方法</h2> <h3 id="jsx-语法"><a href="#jsx-语法" class="header-anchor">#</a> <code>JSX</code> 语法</h3> <div class="custom-block tip"><p class="custom-block-title">语法</p> <p><code>react</code>构建页面有自己的语法：<code>JSX</code>语法；</p> <p><code>jsx</code>是一种<code>JS</code>和<code>html</code>混合的语法，<code>HTML</code> 语言直接写在 <code>JavaScript</code> 语言之中，不加任何引号，这就是 <code>jsx</code> 的语法，它允许 <code>HTML</code> 与 <code>JavaScript</code> 的混写；<code>jsx</code>最后会通过<code>babel</code>进行转义</p> <p><code>jsx</code>中的<code>html</code>部分和原生<code>html</code>基本一样（也有不一样的比如<code>class</code>要用<code>className</code>，<code>label</code>的<code>for</code>要用<code>htmlFor</code>），并且属性名要使用驼峰命名法；
用<code>jsx</code>语法写的内容叫做<code>jsx</code>元素(虚拟<code>DOM</code>元素)；
<code>jsx</code>元素具有不变性 ：只在页面初次加载的时候渲染一次，以后只能通过更改状态和属性来重新渲染；</p> <p><code>jsx</code>表达式的用法</p> <ul><li>1、可以放<code>JS</code>的执行结果：在<code>react</code>中想将<code>js</code>当作变量引入到<code>jsx</code>中需要使用<code>{}</code></li> <li>2、在<code>jsx</code>中,相邻的两个<code>jsx</code>元素 渲染时需要外面包裹一层元素（只能有一个根元素）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>str<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>str<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token comment">//在jsx语法中，这种写法是错误的</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>3、如果多个元素需要在<code>return</code>后面换行，我们需要加一个<code>()</code>当作一个整体返回</li> <li>4、可以把<code>JSX</code>元素当作函数的返回值</li> <li>5、用<code>&lt;</code>和<code>{}</code>来区分是<code>html</code>还是<code>js</code>表达式：遇到 <code>HTML</code> 标签（以<code>&lt;</code> 开头），就用 <code>HTML</code> 规则解析；遇到代码块（以<code>{</code>开头），就用 <code>JavaScript</code> 规则解析</li> <li>6、循环绑定需要给元素设置唯一的<code>KEY</code>属性（属性值是唯一的），目的是为了方便<code>React</code>做D<code>OMdiff</code>；</li></ul> <p><code>jsx</code>属性的用法</p> <p>在<code>jsx</code>中分为普通属性和特殊属性</p> <ul><li>1、普通属性：和<code>html</code>中的一样</li> <li>2、特殊的属性如<code>class</code>，要使用<code>className</code>；<code>for</code>（<code>label</code>中的<code>for</code>）要使用<code>htmlFor</code></li> <li>3、<code>style</code>要采用对象的方式</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM<span class="token punctuation">,</span><span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str<span class="token operator">=</span><span class="token string">'&lt;h1&gt;纯标签&lt;/h1&gt;'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">background</span><span class="token operator">:</span><span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li className<span class="token operator">=</span><span class="token string">&quot;aa&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li htmlFor<span class="token operator">=</span><span class="token string">&quot;aa&quot;</span> style<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">__html</span><span class="token operator">:</span>str<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>4、<code>dangerouslyInnerHTML</code>插入<code>html</code>(基本上用不到)</li></ul></div> <h3 id="react-createelement"><a href="#react-createelement" class="header-anchor">#</a> <code>React.createElement</code></h3> <blockquote><p><code>React.createElement</code>用来创建一个<code>react</code>对象，具有一个<code>type</code>属性代表当前的节点类型，还有节点的属性<code>props</code>;</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&quot;姜,&quot;</span><span class="token punctuation">,</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&quot;帅哥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//结果如下</span>
<span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'div'</span><span class="token punctuation">,</span><span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">className</span><span class="token operator">:</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'姜'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'span'</span><span class="token punctuation">,</span><span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'handsome'</span><span class="token punctuation">,</span><span class="token literal-property property">children</span><span class="token operator">:</span><span class="token string">'帅哥'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="render"><a href="#render" class="header-anchor">#</a> <code>render</code></h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>此方法是由<code>react-dom</code>模块中提供的方法
第一个参数为要渲染的<code>jsx</code>元素
第二个参数为要把渲染的<code>DOM</code>结构插入到哪个容器当中
第三个参数为渲染完成后需要执行的回调函数；</p> <ul><li>用来将虚拟<code>DOM</code>元素（<code>jsx</code>元素）渲染成真实的<code>DOM</code>；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'app'</span><span class="token operator">&gt;</span>姜<span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">'handsome'</span><span class="token operator">&gt;</span>帅哥<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <h2 id="react-中的虚拟-dom"><a href="#react-中的虚拟-dom" class="header-anchor">#</a> <code>react</code> 中的虚拟 <code>DOM</code></h2> <blockquote><p>我们在<code>react</code>中创建的组件和用<code>jsx</code>语法写出的标签等，都是虚拟的<code>DOM</code>元素：</p> <p>组件并不是真实的 <code>DOM</code> 节点，而是存在于内存之中的一种数据结构，叫做虚拟 <code>DOM</code> （<code>virtual DOM</code>）。只有当它插入文档以后，才会变成真实的 <code>DOM</code> 。根据 <code>React</code> 的设计，所有的 <code>DOM</code> 变动，都先在虚拟 <code>DOM</code> 上发生，然后再将实际发生变动的部分，反映在真实 <code>DOM</code>上，这种算法叫做 <code>DOM diff</code> ，它可以极大提高网页的性能表现。</p></blockquote> <h2 id="虚拟-dom-渲染过程-虚拟-dom-真实-dom"><a href="#虚拟-dom-渲染过程-虚拟-dom-真实-dom" class="header-anchor">#</a> 虚拟 <code>DOM</code> 渲染过程（虚拟 <code>DOM</code> —&gt;真实 <code>DOM</code> ）</h2> <h3 id="_1、构建虚拟dom元素-jsx元素"><a href="#_1、构建虚拟dom元素-jsx元素" class="header-anchor">#</a> 1、构建虚拟DOM元素（jsx元素）：</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>在js中用jsx语法写的jsx元素就是虚拟DOM元素；(render中的元素)
<code>render(&lt;h1 className='red'&gt;我是谁,我在哪&lt;/h1&gt;,window.root)</code></li></ul></div> <h3 id="_2、调用render方法把虚拟dom元素渲染成真实的dom结构"><a href="#_2、调用render方法把虚拟dom元素渲染成真实的dom结构" class="header-anchor">#</a> 2、调用render方法把虚拟DOM元素渲染成真实的DOM结构</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li><p>1）<code>render</code>方法会先用<code>babel</code>把<code>jsx</code>元素转化为<code>ES5</code>语法
<code>'h1', {className: 'red'}, '我是谁,我在哪'</code></p></li> <li><p>2）再用<code>React.createElement</code>方法根据上面的结果创建出一个<code>react</code>对象
<code>React.createElement('h1', {className: 'red'}, '我是谁,我在哪')</code>结果如下
<code>{type: &quot;h1&quot;, props: {className: &quot;red&quot;, children: &quot;我是谁,我在哪&quot;}}</code></p></li> <li><p>3）此时<code>render</code>方法将<code>react</code>对象转化为真正的<code>DOM</code>结构，渲染到页面上
<code>render(&lt;h1 className='red'&gt;我是谁,我在哪&lt;/h1&gt;,window.root)</code></p></li></ul> <p>自己模拟<code>React.createElement</code>方法与<code>render</code>方法：（<code>render</code>不完善）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'div'</span><span class="token punctuation">,</span><span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">className</span><span class="token operator">:</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'姜'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'span'</span><span class="token punctuation">,</span><span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'handsome'</span><span class="token punctuation">,</span><span class="token literal-property property">children</span><span class="token operator">:</span><span class="token string">'帅哥'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span>props<span class="token punctuation">,</span><span class="token operator">...</span>children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>children<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> children <span class="token operator">=</span> children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>type<span class="token punctuation">,</span><span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">,</span><span class="token literal-property property">children</span><span class="token operator">:</span>children<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">myRender</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> container<span class="token punctuation">,</span>callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>type<span class="token punctuation">,</span> props<span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
  <span class="token keyword">let</span> ele <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建第一层</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'children'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//children可能是数组也可能是一个字符串（纯文本）</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>props<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">===</span><span class="token string">'Array'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        props<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> item <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//如果子元素是对象，那就继续调用render</span>
            <span class="token function">myRender</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            ele<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment">//字符串的话直接创建文本节点并插入到元素中</span>
        ele<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>props<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'className'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//className要做单独处理</span>
      ele<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> props<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      ele<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> props<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//其他的直接设置(style等属性未做处理)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//把DOM元素插入到html中</span>
  callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//=&gt;添加成功后触发回调函数执行</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <h2 id="react中的组件"><a href="#react中的组件" class="header-anchor">#</a> <code>react</code>中的组件</h2> <blockquote><p><code>react</code>元素是是组件组成的基本单位</p> <p>组件有两种声明方式</p></blockquote> <h3 id="_1、第一种方式是函数声明"><a href="#_1、第一种方式是函数声明" class="header-anchor">#</a> 1、第一种方式是函数声明</h3> <div class="custom-block tip"><p class="custom-block-title">函数声明</p> <p>每一个创建的组件都是一个自定义的标签，在标签上设置的属性都会转换为<code>react</code>对象的<code>props</code>属性，当<code>react</code>渲染<code>DOM</code>的时候会把<code>props</code>传递给下面例子中的<code>Build</code>函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM<span class="token punctuation">,</span><span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> school1<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zfpx'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> school2<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'珠峰'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">Build</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// &quot;函数&quot;(组件)的参数是属性</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token operator">&amp;&amp;</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">{</span>props<span class="token operator">&amp;&amp;</span>props<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Build name<span class="token operator">=</span><span class="token punctuation">{</span>school1<span class="token punctuation">.</span>name<span class="token punctuation">}</span> age<span class="token operator">=</span><span class="token punctuation">{</span>school1<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Build <span class="token punctuation">{</span><span class="token operator">...</span>school2<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token comment">/* 利用解构赋值将对象中的内容解构出来传递给Build组件 */</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <h3 id="_2、第二种是以类的形式声明"><a href="#_2、第二种是以类的形式声明" class="header-anchor">#</a> 2、第二种是以类的形式声明</h3> <div class="custom-block tip"><p class="custom-block-title">类声明</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span><span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> school1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'珠峰'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> school2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'珠峰'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 1.类声明的组件有this this上有props属性</span>
<span class="token keyword">class</span> <span class="token class-name">Build</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span><span class="token comment">//Component这个基类上有this.setState</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 这个组件在调用时默认会调用render方法(此render相当于注册组件)</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token punctuation">{</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token comment">// return  &lt;p&gt;{this.props.name} {this.props.age}&lt;/p&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
<span class="token punctuation">{</span><span class="token comment">/*  此render的渲染步骤
1）先渲染外层div，将jsx元素转化为ES5的语法，然后调用React.createElement方法创建react对象，当遇到div下的子元素的时候，会进行以下操作
//1、发现Build 是一个继承Component的类，它会创建这个类的一个实例，并且执行原型上的render方法
//2、执行原型上的render返回JSX元素，然后继续执行外层的render
2）继续将上面返回的jsx元素转化为es5语法，调用React.createElement方法创建虚拟DOM元素对象，Build 这个位置被返回的元素对象替换
3）外层ReactDOM.render将上面生成的react对象渲染成真实的DOM结构，并追加到页面中；*/</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Build name<span class="token operator">=</span><span class="token punctuation">{</span>school1<span class="token punctuation">.</span>name<span class="token punctuation">}</span> age<span class="token operator">=</span><span class="token punctuation">{</span>school1<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Build <span class="token punctuation">{</span><span class="token operator">...</span>school2<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><em>区别</em>：类声明有状态，<code>this</code>，和生命周期</p> <p>声明组件的规则：</p> <ul><li>1、首字母必须大写,目的是为了和<code>JSX</code>元素进行区分</li> <li>2、组件定义后可以像<code>JSX</code>元素一样进行使用</li> <li>3、可以通过<code>render</code>方法将组件渲染成真实<code>DOM</code>（做了优化 只会重新渲染改变的地方）</li></ul> <p>单闭合标签不能添加子节点；双闭合标签可以</p></div> <h2 id="组件中属性-props-和状态-state-的区别"><a href="#组件中属性-props-和状态-state-的区别" class="header-anchor">#</a> 组件中属性(props)和状态(state)的区别</h2> <div class="custom-block tip"><p class="custom-block-title">区别</p> <p>属性和状态的变化都会影响视图更新，但是两者导致视图刷新的机制是不一样的；</p> <ul><li>1、确切的说不是因为<code>props</code>更新了导致的视图刷新，而是传递属性的组件重新的渲染了，从而导致接受属性的组件也重新渲染，这样属性就也随着更新了；</li> <li>2、状态导致的视图刷新：只要通过<code>this.setState</code>改变状态，视图就会刷新；</li></ul></div> <h2 id="组件的数据来源方式"><a href="#组件的数据来源方式" class="header-anchor">#</a> 组件的数据来源方式</h2> <h3 id="_1、通过props-属性-获取数据"><a href="#_1、通过props-属性-获取数据" class="header-anchor">#</a> 1、通过props(属性) 获取数据：</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>外界传递进来的（存在默认属性和属性校验）,是只读的，不能修改；</p> <p>有属性校验模块：<code>prop-types</code>（用来校验属性的类型和是否必须给）用<code>yarn add prop-types</code>来安装。用来校验属性的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span><span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom<span class="token punctuation">,</span><span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span><span class="token punctuation">;</span>
<span class="token comment">//   1、默认的属性必须写在defaultProps中（不能改名字）</span>
<span class="token comment">//   2、校验器的名字必须是propTypes(不能改名字)；</span>
<span class="token keyword">class</span> <span class="token class-name">School</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span><span class="token comment">//类上的属性（把类当作对象添加的属性）就叫做静态属性</span>
  <span class="token keyword">static</span> defaultProps<span class="token operator">=</span><span class="token punctuation">{</span><span class="token comment">//会先默认调用defaultProps</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'珠峰'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> propTypes<span class="token operator">=</span><span class="token punctuation">{</span><span class="token comment">//校验属性的值（number）类型和是否必须给（isRequired）</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequired
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//如果想在constructor中使用props，则只能传递参数props，在constructor外面可以直接用this.props</span>
    <span class="token comment">//不能在组件中更改属性</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token comment">//undefined</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//渲染组件的，返回一个组件</span>
    <span class="token comment">//如果没有默认的defaultProps，也没有传递props，则this.props是一个空对象</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//name={'我是谁'}:这样写大括号中就可以是变量</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>School name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'我是谁'</span><span class="token punctuation">}</span> age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <h4 id="_2、this-state-状态-状态是组件自己的"><a href="#_2、this-state-状态-状态是组件自己的" class="header-anchor">#</a> 2、this.state(状态) 状态是组件自己的</h4> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>是可读写的（写了状态就必须给默认值）；
我们可以通过<code>this.setState({})</code>方法来修改状态，由于修改状态会引起视图刷新（即更新<code>DOM</code>），这里面要经过<code>React</code>核心中的<code>diff</code>算法，最终才能决定是否进行重渲染，以及如何渲染。而且为了批次与效能的理由，多个<code>setState</code>有可能在执行的过程中需要被合并，所以它被设计成异步来执行时相当合理的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span><span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom<span class="token punctuation">,</span><span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token comment">//1、state变化可以更新视图,只能通过this.setState({})来更改状态,调用后会更新视图</span>
<span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//默认为undefined</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//setState方法会默认按最后的设置进行执行</span>
    <span class="token comment">// this.setState({count:this.state.count+val});</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span>val<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//会执行这个</span>
    <span class="token comment">//setState有两种写法，一种是传入对象的方式，一种是传入函数的方式</span>
    <span class="token comment">//下一个状态是依赖于上一个状态时，需要写成函数的方式</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span>prevState<span class="token punctuation">.</span>count<span class="token operator">+</span>val<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果返回的就是一个对象，则需要用'()'包裹</span>
    <span class="token comment">//等同与下面这种写法 </span>
    <span class="token comment">// this.setState({count:this.state.count+val},function () {</span>
    <span class="token comment">//   this.setState({count:this.state.count+val});</span>
    <span class="token comment">// }</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Counter<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <h2 id="复合组件与数据传递"><a href="#复合组件与数据传递" class="header-anchor">#</a> 复合组件与数据传递</h2> <blockquote><p>复合组件：将多个组件进行组合嵌套；</p> <p>复合组件之间的数据传递：</p></blockquote> <h3 id="_1、父传子"><a href="#_1、父传子" class="header-anchor">#</a> 1、父传子</h3> <blockquote><p>父组件传递给子组件数据通过设置属性的方式</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span><span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom<span class="token punctuation">,</span><span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'bootstrap/dist/css/bootstrap.css'</span><span class="token punctuation">;</span>
<span class="token comment">//1、什么是复合组件，将多个组件进行组合</span>
<span class="token comment">//2、结构非常复杂时可以把组件分离开</span>
<span class="token comment">//3、复合组件 有父子关系，父的数据传递给子(通过给子组件设置属性)</span>
<span class="token comment">// Panel组件 Heading Body</span>
<span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//由于在Counter中传递了属性，所以这里可以用this.props获取到；</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>header<span class="token punctuation">,</span>body<span class="token punctuation">}</span><span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'container'</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'panel-default panel'</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* 这里写了之后就可以在下面的子组件中拿到对应的props值 */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Header header<span class="token operator">=</span><span class="token punctuation">{</span>header<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Header<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Body body<span class="token operator">=</span><span class="token punctuation">{</span>body<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Body<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//react中需要把属性一层一层向下传递：单向数据流；</span>
<span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'panel-heading'</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* 上面传递了之后就可以直接在此处使用this.props属性了 */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>header<span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Body</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'panel-body'</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>body<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> data<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">header</span><span class="token operator">:</span><span class="token string">'我很帅'</span><span class="token punctuation">,</span><span class="token literal-property property">body</span><span class="token operator">:</span><span class="token string">'长的英俊'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Counter <span class="token punctuation">{</span><span class="token operator">...</span>data<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_2、子传父"><a href="#_2、子传父" class="header-anchor">#</a> 2、子传父</h4> <blockquote><p>通过事件的方式：父亲传递给儿子一个函数，儿子调用父亲的函数将要改的值传递给父亲，父亲更新值，刷新视图；</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom<span class="token punctuation">,</span> <span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'bootstrap/dist/css/bootstrap.css'</span><span class="token punctuation">;</span>
<span class="token comment">//1、子传父 通过父亲传递给儿子一个函数，儿子调用父亲的函数将要修改的值传递给父亲，父亲更新值，刷新视图；</span>
<span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'primary'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">changeColor</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>header<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'container'</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'panel panel-'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>color<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Header header<span class="token operator">=</span><span class="token punctuation">{</span>header<span class="token punctuation">}</span> color<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeColor<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//react中需要把属性一层一层向下传递：单向数据流；</span>
<span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">clickColor</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token string">'danger'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//儿子调用父亲的方法，把要改的值传递给父亲，让父亲自己修改</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'panel-heading'</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>header<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">btn btn-danger</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickColor<span class="token punctuation">}</span><span class="token operator">&gt;</span>改颜色<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token string">'我很帅'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Counter <span class="token punctuation">{</span><span class="token operator">...</span>data<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ref-属性"><a href="#ref-属性" class="header-anchor">#</a> <code>ref</code> 属性</h2> <p>::: ref
<code>ref</code>可以写在组件上也可以写在<code>DOM</code>元素上，获取的时候得到两者的结果是不同的；</p> <ul><li>写在组件上时（这里的组件是有状态的组件），通过<code>refs</code>获取的是组件的实例；</li> <li>写在<code>DOM</code>元素上时，通过<code>refs</code>获取的是具体的<code>DOM</code>元素节点
:::</li></ul> <h2 id="ref的两种写法"><a href="#ref的两种写法" class="header-anchor">#</a> ref的两种写法</h2> <h3 id="_1、直接写为一个值"><a href="#_1、直接写为一个值" class="header-anchor">#</a> 1、直接写为一个值</h3> <blockquote><p>通过<code>ref</code>设置的属性：可以通过<code>this.refs.xxx</code>获取到对应<code>ref</code>值为<code>xxx</code>的<code>dom</code>元素或者组件的实例</p></blockquote> <h3 id="_2、写成一个函数的形式"><a href="#_2、写成一个函数的形式" class="header-anchor">#</a> 2、写成一个函数的形式</h3> <blockquote><p>写成函数时，这个函数将会在渲染成真实<code>DOM</code>结构或组件被挂载后执行，函数的参数为真实的<code>DOM</code>结构或组件的实例</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//如上面非受控组件中的例子</span>
<span class="token comment">//1、直接将ref写为一个值</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token string">'a'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">//2、将ref写为一个函数</span>
 <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>c<span class="token operator">=</span>x<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
 <span class="token punctuation">{</span><span class="token comment">/* x 代表真实的DOM(写成函数的形式会默认传入当前设置ref的DOM结构 )，上面这种写法相当于把DOM结构挂载到了this的自定义属性c上，以后可以直接用this.c拿到这个input的DOM结构*/</span><span class="token punctuation">}</span>
<span class="token function-variable function">resultChange</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token comment">//通过ref设置的属性：可以通过this.refs.xxx获取到对应ref值为xxx的dom元素</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span>value<span class="token operator">=</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>a<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>b<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="受控组件与非受控组件"><a href="#受控组件与非受控组件" class="header-anchor">#</a> 受控组件与非受控组件</h2> <blockquote><p>当引入<code>HTML</code>表单元素时，根据是否将数据托管到<code>React</code>组件中还是将其依然保留在<code>DOM</code>元素中来区分为受控与非受控组件，受控组件可以赋予默认的值</p></blockquote> <h3 id="受控组件"><a href="#受控组件" class="header-anchor">#</a> 受控组件</h3> <blockquote><p>指交由<code>React</code>控制并且所有的表单数据统一存放的组件，需要与<code>onInput/onChange/disabed/readOnly</code>等控制<code>value/checked</code>的属性或事件一起使用</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom<span class="token punctuation">,</span> <span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Input</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">//1、受状态控制的组件，必须要有onChange方法，否则不能使用；</span>
  <span class="token comment">//2、受控组件可以赋予默认值(官方推荐使用受控组件)</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">val</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//初始化状态：设置默认值</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">inputChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//处理多个输入框的值映射到this.state的方法</span>
    <span class="token comment">//val:要修改的state中的属性的名称</span>
    <span class="token comment">//e:事件源（e.target.value是要修改成的值）</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">[</span>val<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//更改状态</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 下面两个input都受this.state影响（受控组件） */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>a<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">inputChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>b<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          <span class="token comment">// 方法执行的时候要用到事件对象e，所以必须要传</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">inputChange</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>b<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Input<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="非受控组件-基于-ref-来管理"><a href="#非受控组件-基于-ref-来管理" class="header-anchor">#</a> 非受控组件（基于 <code>ref</code> 来管理）</h3> <blockquote><p>而非受控组件则是由<code>DOM</code>存放表单数据；我们可以使用<code>refs</code>来操控<code>DOM</code>元素</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span><span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom<span class="token punctuation">,</span><span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Input</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
  <span class="token comment">//输入框value值不受状态控制，不能初始化默认值</span>
  <span class="token function-variable function">resultChange</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token comment">//通过ref设置的属性：可以通过this.refs.xxx获取到对应ref值为xxx的dom元素</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span>value<span class="token operator">=</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>a<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>b<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>resultChange<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token string">'a'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token string">'b'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/*x代表真实的DOM(写成函数的形式会默认传入当前设置ref的DOM结构)，下面这种写法相当于把元素挂载到了this的自定义属性c上*/</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>c<span class="token operator">=</span>x<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Input<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="受控组件与非受控组件的区别"><a href="#受控组件与非受控组件的区别" class="header-anchor">#</a> 受控组件与非受控组件的区别</h2> <blockquote><p>虽然非受控组件看上去更好实现，可以直接从<code>DOM</code>中获取数据，而不需要额外的代码。不过实际开发中我们不建议使用非受控组件，因为更多情况下我们需要考虑到表单验证、选择性的开启或者关闭点击按钮、强制输入格式等功能的支持，而此时我们将数据托管到<code>React</code>中有助于我们更好的以声明式的方式完成这些功能；引入<code>React</code>的原因就是为了将我们从繁重的直接操作<code>DOM</code>中释放出来</p></blockquote> <h2 id="react-元素中的事件绑定"><a href="#react-元素中的事件绑定" class="header-anchor">#</a> <code>react</code> 元素中的事件绑定</h2> <div class="custom-block tip"><p class="custom-block-title">事件</p> <p>给<code>react</code>元素（<code>jsx</code>元素）事件绑定对应的方法时，方法如果不做处理，那么执行的时候方法中的<code>this</code>默认是<code>undefined</code></p> <p>可通过如下方式解决：</p> <ul><li>1、使用<code>bind</code>方式；（绑定的时候处理）</li> <li>2、使用<code>ES6</code>的箭头函数（绑定时候处理：在外层包一层箭头函数）</li> <li>3、使用<code>ES7</code>的箭头函数(在类的原型上定义的时候处理：写为：函数名=()=&gt;{})</li></ul></div> <h2 id="react-中的生命周期"><a href="#react-中的生命周期" class="header-anchor">#</a> <code>React</code> 中的生命周期</h2> <div class="custom-block tip"><p class="custom-block-title">生命周期</p> <p>在<code>react</code>操作过程中，设定了很多的执行阶段，每个阶段提供了不同方法
<img src="/assets/react-1-1.png" alt="react-1-1"></p> <p>[初期渲染]
<code>defaultProps</code>：默认属性设置与校验
<code>constructor</code>：获取属性和设置默认初始状态
<code>componentWillMount(只执行一次)</code>：<code>constructor</code>执行完成后，<code>DOM</code>结构开始加载之前，执行此方法，
<code>render(开始渲染)</code> <code>componentDidMount(只执行一次)</code>：<code>DOM</code>结构加载完成后会自动触发此函数</p> <p>[状态发生改变时触发]
<code>shouldComponentUpdate</code>：状态更新时会触发此方法，返回布尔值
<code>componentWillUpdate</code>：如果<code>shouldComponentUpdate</code>返回<code>true</code>则执行此函数，否则不执行
<code>render(开始渲染)</code> <code>componentDidUpdate</code>：组件完成更新后触发此方法</p> <p>[卸载组件时触发]
<code>ReactDOM.unmountComponentAtNode</code>：删除某个组件
<code>componentWillUnmount(组件将要卸载)</code>：组件移除时会调用此方法,一般在这个方法中我们要清除定时器</p> <p>[属性发生改变时触发]
<code>componentWillReceiveProps</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">,</span> PureComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom<span class="token punctuation">,</span> <span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token comment">/*PureComponent是纯组件：比较的是状态的地址，如果是同一个地址，则不会更新，所以状态最好采用新的状态替换掉老的*/</span>
  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zfpx'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1、constructor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//同步代码放在此处最好：如获取本地的数据：在渲染之前获取数据，只渲染一次</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2、父组件将要加载'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'5、父组件已经挂载完成'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">//react可以在shouldComponentUpdate方法中优化 PureComponent 可以帮我们做这件事</span>
  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//分别代表下一次的属性和下一次的状态</span>
    <span class="token comment">//组件是否需要更新</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父组件是否需要更新'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> nextState<span class="token punctuation">.</span>number <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token comment">//如果此函数返回了false，就不会调用render方法了</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//乱用this.setState({})会造成栈溢出</span>
  <span class="token function">componentWillUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父组件将要更新'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父组件完成更新'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">3、父组件render（渲染）</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ChildCounter n<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ChildCounter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">newProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//第一次不会执行，之后属性更新时才会执行</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子有新的属性'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'4、child render'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>n<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子组件是否需要更新'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> nextProps<span class="token punctuation">.</span>n <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Counter name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'计数器'</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <p><em>注意</em>:</p> <p>最好不要在任何一个状态更新时触发的方法中写<code>this.setState()</code>，如果不加条件控制的话，会再次触发状态更新而导致方法执行，这样就会造成栈溢出；</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*页面初始化时触发*/</span>
defaultProps
constructor
componentWillMount  <span class="token comment">//(将要挂载)页面初次加载时执行1次</span>
render
componentDidMount   <span class="token comment">// (完成挂载)页面初次加载完成时执行1次</span>

<span class="token comment">/*状态更新时会触发*/</span>
shouldComponentUpdate
componentWillUpdate
render
componentDidUpdate

<span class="token comment">/*属性更新*/</span>
componentWillReceiveProps

<span class="token comment">/*卸载*/</span>
componentWillUnmount
</code></pre></div><h2 id="获取组件的所有子节点"><a href="#获取组件的所有子节点" class="header-anchor">#</a> 获取组件的所有子节点</h2> <div class="custom-block tip"><p class="custom-block-title">获取子节点</p> <p>在函数式声明的组件中我们用<code>props.children</code>来获取组件的所有子节点；
在以类声明的组件中我们用<code>this.props.children</code>来获取组件的所有子节点；</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Dinner<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>吃啥<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>吃啥<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span> <span class="token comment">/* 此处相当于组件的子节点 */</span> <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Dinner<span class="token operator">&gt;</span><span class="token punctuation">,</span>window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>this.props.children</code>的值有三种情况：</p> <ul><li>1、如果组件中间没有子节点，值是<code>undefined</code>；</li> <li>2、如果有一个子节点，获取的是对象数据类型的值</li> <li>3、如果有多个子节点，获取的是数组类型的值</li></ul> <p>我们可以用<code>React.Children.map</code>去遍历<code>this.props.children</code>获取到的结果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom<span class="token punctuation">,</span><span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token comment">//this.props.children是获取组件中间的内容</span>
<span class="token comment">//有三种可能的值：</span>
<span class="token comment">// 1、不传的话默认是undefined；</span>
<span class="token comment">// 2、传一个时是对象类型</span>
<span class="token comment">// 3、传多个是数组类型</span>
<span class="token comment">//我们可以用React.Children.map去遍历this.props.children</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Dinner</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Dinner<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>吃啥<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>吃啥<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token comment">/*此处相当于组件中间的内容*/</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Dinner<span class="token operator">&gt;</span><span class="token punctuation">,</span>window<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/19/2020, 11:40:50 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/react/2.html">
        React路由
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.acb235b1.js" defer></script><script src="/assets/js/2.d372d77b.js" defer></script><script src="/assets/js/1.37fa4b6c.js" defer></script><script src="/assets/js/89.1115943f.js" defer></script>
  </body>
</html>
